/*! For license information please see bundle-echat-2902a49c83f6a05537cb.js.LICENSE.txt */
(()=>{var t={506:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSeenTextAll=void 0,e.isSeenTextAll=function(t){return"all"in t}},615:(t,e,n)=>{"use strict";e.Bl=e.xr=e.mv=void 0,n(506);var r=n(568);Object.defineProperty(e,"mv",{enumerable:!0,get:function(){return r.Proto}});var o=n(64);e.xr=o;var i=n(881);Object.defineProperty(e,"Bl",{enumerable:!0,get:function(){return i.MentionsMultiMap}})},64:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultProxy=void 0;var n=function(){function t(){}return t.prototype.onSync=function(t){},t.prototype.onOnline=function(t){},t.prototype.onOffline=function(){},t.prototype.onWrongToken=function(){},t.prototype.onDiscover=function(t){},t.prototype.onRoomText=function(t){},t.prototype.onUpdateRoomText=function(t){},t.prototype.onDeleteRoomText=function(t){},t.prototype.onNotify=function(t){},t.prototype.onRoster=function(t){},t.prototype.onSeenText=function(t){},t.prototype.onSeenAllText=function(){},t.prototype.onUnseenText=function(t){},t.prototype.onTyping=function(t){},t.prototype.onReceipts=function(t){},t.prototype.onRoomMeta=function(t){},t.prototype.onMutedRooms=function(t){},t.prototype.onUserStatus=function(t){},t}();e.DefaultProxy=n},881:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiMap=e.MentionsMultiMap=void 0;var r=n(469),o=n(369),i=function(){function t(){this._multimap=new s}return Object.defineProperty(t.prototype,"multimap",{get:function(){return this._multimap},enumerable:!1,configurable:!0}),t.prototype.Add=function(t,e){var n,i,s=this,a=t.toLowerCase(),u=a.split(/([\s-_.]+)/);this._multimap.Add("",e);for(var c=0;c<u.length;c++)i=u.slice(c).join(""),n="",r.each(i,(function(t){n+=t,s._multimap.Add(n,e),n===a&&s._multimap.Add(n,o.Map({match_id:e}))}))},t.prototype.DeleteMatch=function(t,e){var n=t.toLowerCase();this._multimap.Delete(n,o.Map({match_id:e}))},t.prototype.Ids=function(t){return this._multimap.Values(t.toLowerCase())},t}();e.MentionsMultiMap=i;var s=function(){function t(){this._multimap=o.Map()}return t.prototype.Add=function(t,e){var n=this._multimap.get(t)||o.Set();this._multimap=this._multimap.set(t,n.add(e))},t.prototype.Delete=function(t,e){var n=this._multimap.get(t)||o.Set();this._multimap=this._multimap.set(t,n.delete(e)),1===n.size&&(this._multimap=this._multimap.delete(t))},t.prototype.Values=function(t){var e=this._multimap.get(t);return e?e.toJS():[]},t}();e.MultiMap=s},568:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Proto=void 0;var r=n(655),o=n(429),i=n(469),s=n(323),a=n(64),u=n(343),c=new s,f=function(){function t(t){var e=this;this._config=t,this.DISCOVER_TIMEOUT_MILLISECONDS=5e3,this.PULSE_MILLISECONDS=1e3,this.PULSE_TIMEOUT_RESUMED_MILLISECONDS=3e4,this.RECONNECTING_TIMEOUT_MILLISECONDS=15e3,this.RECONNECT_DELAY_RESET_MILLISECONDS=15e3,this.ACK_UUIDS_CHUNK_SIZE=1536,this.WS_BASES=["wss://api.us-east.chalet.8x8.com/ws/v1"],this.DISCOVER_URL="https://api.global.chalet.8x8.com/discover/v2",this.discoverData=void 0,this.useDiscover=!1,this.capabilities=[],this.clientType=void 0,this._wsConnection=null,this._reconnecting=!1,this._nextReconnectTs=0,this._reconnectCounter=0,this._isOffline=!0,this._lastPulse=null,this._sessionKey=null,this._inFlightList=[],this._externalSubscriptions={},this._debug={send:this.doSend.bind(this),onMsg:this.onWsMessage.bind(this)},this._proxy=new a.DefaultProxy,this.isInsideBundle=!1,this.buffer=[],this.flushBuffer=function(){e.buffer.length&&(e.sendToWs(e.buffer),e.buffer=[])},this.sendToWs=function(t){e._wsConnection&&e._wsConnection.send(JSON.stringify(t))},this.pulse=function(){e.reconcileInFlight(!1);var t=(new Date).getTime();e._lastPulse&&t-e._lastPulse>e.PULSE_TIMEOUT_RESUMED_MILLISECONDS&&e.resetReconnectTimer(),e._lastPulse=t,e._isOffline?e.offlinePulse():t-e._lastIncomingMessageTimestamp>20*e.PULSE_MILLISECONDS&&0===e._inFlightList.length&&(e.reportError("info_ping",new Error),e.sendOne("ping",{retry_policy:"never",timeout_milliseconds:1e4}).catch((function(t){"object"==typeof t&&"type"in t&&"code"in t?"error"===t.type&&"session_expired"===t.code?e.reportError("info_ping_outdated_response",new Error):"error"===t.type&&"client_timeout"===t.code?e._isOffline||e.goOffline("PING ACK timeout"):e.reportError("info_ping_failed",new Error):e.reportError("info_ping_failed",new Error)})))},this.resetReconnectIfConnectionIsGood={timer:void 0,onOnline:function(){e.resetReconnectIfConnectionIsGood.timer=setTimeout((function(){e.resetReconnectTimer()}),e.RECONNECT_DELAY_RESET_MILLISECONDS)},onOffline:function(){e.resetReconnectIfConnectionIsGood.timer&&clearTimeout(e.resetReconnectIfConnectionIsGood.timer)}},"number"==typeof t.PULSE_MILLISECONDS&&t.PULSE_MILLISECONDS>=100&&(this.PULSE_MILLISECONDS=t.PULSE_MILLISECONDS),"string"==typeof t.DISCOVER_URL&&t.DISCOVER_URL&&(this.DISCOVER_URL=t.DISCOVER_URL),"object"==typeof t.WS_BASES&&Array.isArray(t.WS_BASES)&&t.WS_BASES.length>0?this.WS_BASES=t.WS_BASES:"string"==typeof t.WS_BASE&&t.WS_BASE&&(this.WS_BASES=[t.WS_BASE]),"boolean"==typeof t.useDiscover&&(this.useDiscover=t.useDiscover),Array.isArray(t.capabilities)&&(this.capabilities=t.capabilities),"number"==typeof t.RECONNECTING_TIMEOUT_MILLISECONDS&&(this.RECONNECTING_TIMEOUT_MILLISECONDS=t.RECONNECTING_TIMEOUT_MILLISECONDS),"number"==typeof t.RECONNECT_DELAY_RESET_MILLISECONDS&&(this.RECONNECT_DELAY_RESET_MILLISECONDS=t.RECONNECT_DELAY_RESET_MILLISECONDS),"string"==typeof t.clientType&&(this.clientType=t.clientType),this._pulseInterval=setInterval(this.pulse,this.PULSE_MILLISECONDS)}return t.prototype.resetLocalSessionState=function(t,e){var n=this;void 0===t&&(t=!0),void 0===e&&(e="reset_session"),this._inFlightList.forEach((function(t){var r=t.reject,o={type:"error",code:e};n.collectDiagnostics(t,void 0,o),r(o)})),t&&(this._sessionKey=null,this._externalSubscriptions={}),this._inFlightList=[],this.discoverData&&this._proxy.onDiscover(void 0),this.discoverData=void 0},t.prototype.isAckEnvelope=function(t){return!!t.ack_uuids},t.prototype.onWsMessage=function(t){var e=this;this._lastIncomingMessageTimestamp=(new Date).getTime();var n=[];i.each(t,(function(t){if(e.isAckEnvelope(t)){var r=t.data,o=t.ack_uuids,s=i.partition(e._inFlightList,(function(t){return-1!==o.indexOf(t.uuid)})),a=s[0],u=s[1];e._inFlightList=u,a.map((function(n){var o=n.resolve,i=n.reject;"object"==typeof r&&"error"===r.type?(e.collectDiagnostics(n,t,r),i(r)):(e.collectDiagnostics(n,t),o(r))}))}else{var c=t.uuid,f=t.data;e.onIncomingMessage(f),c?n.push(c):e.reportError("incoming_message_uuid_missing",new Error,t)}})),n.length>0&&this.sendAck(n)},t.prototype.onIncomingMessage=function(t){"object"==typeof t&&("text_parsed"===t.type?this._proxy.onRoomText(t):"update_text_parsed"===t.type?this._proxy.onUpdateRoomText(t):"delete_text"===t.type?this._proxy.onDeleteRoomText(t):"notify"===t.type?this._proxy.onNotify(t):"typing"===t.type?this._proxy.onTyping(t):"roster"===t.type?this._proxy.onRoster(t):"seen_text"===t.type?this._proxy.onSeenText(t):"unseen_text"===t.type?this._proxy.onUnseenText(t):"external_notify"===t.type?this._handleExternalNotify(t):"receipts"===t.type?this._proxy.onReceipts(t):"meta"===t.type?this._proxy.onRoomMeta(t):"seen_all_text"===t.type?this._proxy.onSeenAllText(t):"user_status"===t.type?this._proxy.onUserStatus(t):"muted_rooms"===t.type?this._proxy.onMutedRooms(t):this.reportError("incoming_message_unknown_type",new Error,t))},t.prototype.reportError=function(t,e,n){this._proxy.onError?this._proxy.onError({type:t,error:e,info:n}):console.error(t,e,n)},t.prototype._handleExternalNotify=function(t){var e=this,n=t.resource,r=t.body,o=this._externalSubscriptions[n];o&&o.map((function(t){try{t(r)}catch(t){e.reportError("subscription_handler_crash",new Error,t)}}))},t.prototype.setProxy=function(t){this._proxy=t},t.prototype.setSessionToken=function(t,e){this.reportError("info_set_session_token",new Error,!!t),this._sessionToken=t,this._pushToken=e,this._reconnecting&&this._wsConnection&&this._wsConnection.getStatus()===u.WebSocketServiceStatus.Open?this.onConnected():(this._reconnecting=!1,this.resetLocalSessionState(!1,"token_changed"),this.resetReconnectTimer(),this._isOffline||this.goOffline("new token"))},t.prototype.timeBeforeNextReconnectMs=function(){if(this._reconnecting)return 0;if(this._isOffline){var t=(new Date).getTime(),e=this._nextReconnectTs-t;return e>0?e:0}return-1},t.prototype.resetReconnectTimer=function(){this._nextReconnectTs=0,this._reconnectCounter=0},t.prototype.forceReconnect=function(){this.resetReconnectTimer(),this._isOffline||this.goOffline("forceReconnect"),this._reconnecting=!1,this._sessionToken||this.onWsWrongToken(),this.pulse()},t.prototype.shutdown=function(){clearInterval(this._pulseInterval),this.goOffline("shutdown"),this.resetLocalSessionState(!0,"shutdown")},t.prototype.getApiBase=function(){if(!this.useDiscover){var t=this.WS_BASES[0].split("/");return("ws:"===t[0]?"http://":"https://")+t[2]}return this.discoverData?this.discoverData.api_http_base:void 0},t.prototype.setDebugOptions=function(t){var e=this,n=t.wsLatency,r=void 0===n?100:n,o=t.wsSendDelay,i=void 0===o?100:o,s=t.wsReceiveDelay,a=void 0===s?100:s,u=function(t,e){var n=0;return function(r){var o=(new Date).getTime(),i=Math.max(o,n);n=i+t,setTimeout((function(){r()}),i-o+e)}},c=u(i,r);this.doSend=function(t){c((function(){e._debug.send(t)}))};var f=u(a,r);this.onWsMessage=function(t){f((function(){e._debug.onMsg(t)}))}},t.prototype.getUserRoster=function(t){return this.sendOne("user_roster?",t)},t.prototype.getRoster=function(t,e){return this.sendOne(r.__assign({type:"roster?"},t),e)},t.prototype.joinRoom=function(t,e){return this.sendOne(r.__assign({type:"join"},t),this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.leaveRoom=function(t,e){return this.sendOne({type:"leave",room_id:t},this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.sendRoomText=function(t,e,n){var r=this.sharedFiles(t),o=this.mentions(t,e);return this.sendOne({type:"text_raw",room_id:t.room_id,raw:t.raw,bot_name:t.bot_name,bot_email:t.bot_email,bot_avatar_url:t.bot_avatar_url,shared_files:r,mentions:o,meta:t.meta,quote:t.quote},this.mergeMessageOptions(n,"never",5e3))},t.prototype.updateRoomText=function(t,e,n){return this.sendOne({type:"update_text_raw",room_id:t.room_id,id:t.id,raw:t.raw,mentions:e?this.mentions(t,e):t.mentions,quote:t.quote},this.mergeMessageOptions(n,"never",5e3))},t.prototype.deleteRoomText=function(t,e){return this.sendOne({type:"delete_text",room_id:t.room_id,id:t.id},this.mergeMessageOptions(e,"never",5e3))},t.prototype.loadRoomHistory=function(t,e){return this.sendOne(r.__assign({type:"page?"},t),e)},t.prototype.archiveForum=function(t,e){return this.sendOne({type:"archive_forum",id:t.forum_id},e)},t.prototype.renameForum=function(t,e){return this.sendOne({type:"change_forum",id:t.forum_id,name:t.name},e)},t.prototype.changeForumAccess=function(t,e,n){return this.sendOne({type:"change_forum",id:t,access:this.membersToAccess(e)},n)},t.prototype.changeForumAvatar=function(t,e,n){return this.sendOne({type:"change_forum",id:t,avatar_url:e},n)},t.prototype.markSeenText=function(t,e){return this.sendOne(r.__assign({type:"seen_text"},t),this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.seenAllText=function(t,e){return this.sendOne({type:"seen_all_text",room_ids:t},this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.markUnseenText=function(t,e){return this.sendOne({type:"unseen_text",room_id:t.room_id,tss:t.tss,mentioned_tss:t.mentioned_tss},this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.getTyping=function(t,e){return this.sendOne({type:"typing?",room_id:t},e)},t.prototype.setTyping=function(t,e){return this.sendOne({type:"typing",room_id:t},this.mergeMessageOptions(e,"never",5e3))},t.prototype.externalCall=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,o,i,s,a,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=t.method,o=t.resource,i=t.headers,s=t.body,a=t.notify,"string"!=typeof o)throw new Error("Required parameter 'resource' was not provided");return u=!1,"function"==typeof a&&o&&(u=!0,(c=this._externalSubscriptions[o]||[]).push(a),this._externalSubscriptions[o]=c),[4,this.sendOne({type:"external_call",resource:o,headers:i,body:s,method:n,subscribe:u},this.mergeMessageOptions(e,"never",45e3))];case 1:return[2,r.sent().body]}}))}))},t.prototype.externalMultiCall=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return n={},Object.keys(t).forEach((function(e){var r=t[e],i=r.notify,s=r.method,a=r.headers,u=r.body,c=!1;if("function"==typeof i){c=!0;var f=o._externalSubscriptions[e]||[];f.push(i),o._externalSubscriptions[e]=f}n[e]={method:s,headers:a,body:u,subscribe:c}})),[4,this.sendOne({type:"external_multi_call",calls:n},this.mergeMessageOptions(e,"never",45e3))];case 1:return[2,r.sent().replies]}}))}))},t.prototype.removeSubscription=function(t,e){var n=this._externalSubscriptions[t]||[],r=0;if("all"===e)r=n.length,n=[];else if(n.length>0)for(var o=void 0;-1!==(o=n.indexOf(e));)n.splice(o,1),r++;return this._externalSubscriptions[t]=n,{deleted:r,remains:n.length}},t.prototype.externalCallUnsubscribe=function(t,e){this.reportError("deprecated",new Error("externalCallUnsubscribe is deprecated, please use externalUnsubscribe"),{resource:t});var n=this.removeSubscription(t,e),r=n.deleted,o=n.remains;return r&&0===o&&this.sendOne({type:"external_unsubscribe",resources:[t]},this.mergeMessageOptions({},"never",45e3)).catch(),r},t.prototype.externalUnsubscribe=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return n=[],t.forEach((function(t){var e=t.resource,r=t.notify,i=o.removeSubscription(e,r),s=i.deleted,a=i.remains;s&&0===a&&n.push(e)})),0===n.length?[2,[]]:[4,this.sendOne({type:"external_unsubscribe",resources:n},this.mergeMessageOptions(e,"never",45e3))];case 1:return[2,r.sent().errors]}}))}))},t.prototype.createForum=function(t,e,n,r){if(e){var o=this.membersToAccess(n);return this.sendOne({type:"new_forum",name:t,access:o},this.mergeMessageOptions(r,"any_session",5e3))}return this.sendOne({type:"new_forum",name:t},this.mergeMessageOptions(r,"any_session",5e3))},t.prototype.createGroup=function(t,e){return this.sendOne({type:"new_forum",access:this.membersToAccess(t)},this.mergeMessageOptions(e,"any_session",5e3))},t.prototype.createAnnouncementForum=function(t,e,n,r,o){if(n){var i=this.membersToAccess(r);return this.sendOne({type:"new_forum",announcement:!0,id:t,name:e,access:i},this.mergeMessageOptions(o,"any_session",5e3))}return this.sendOne({type:"new_forum",announcement:!0,id:t,name:e},this.mergeMessageOptions(o,"any_session",5e3))},t.prototype.setRoomLevel=function(t,e,n){return this.reportError("deprecated",new Error("setRoomLevel is deprecated, please use setForumLevel instead"),{roomId:t,level:e}),this.sendOne({type:"set_level",forum_id:t,level:e},this.mergeMessageOptions(n,"any_session",5e3))},t.prototype.setForumLevel=function(t,e,n){return this.sendOne({type:"set_level",forum_ids:t,level:e},this.mergeMessageOptions(n,"any_session",5e3))},t.prototype.getFileURLs=function(t,e){return this.sendOne({type:"file_urls?",id:t},e)},t.prototype.getReceipts=function(t,e){return this.sendOne({type:"receipts?",room_id:t},e)},t.prototype.setReceipts=function(t,e,n){return this.sendOne({type:"set_receipt",room_id:t,ts:e},n)},t.prototype.search=function(t,e){return this.sendOne(r.__assign({type:"search?"},t),e)},t.prototype.getRawText=function(t,e,n){return this.sendOne({type:"raw?",room_id:t,tss:e},n)},t.prototype.resetRoomInteraction=function(t,e){return this.reportError("deprecated",new Error("resetRoomInteraction is deprecated, please use resetInteractionTimestamp instead"),{roomId:t}),this.sendOne({type:"reset_interaction",room_id:t},e)},t.prototype.resetInteractionTimestamp=function(t,e){return this.sendOne({type:"reset_interaction",room_ids:t},e)},t.prototype.setInteractionTimestamps=function(t,e){return this.sendOne({type:"set_interaction",interactions:t},e)},t.prototype.getRoomMeta=function(t,e){return this.sendOne({type:"meta?",room_id:t},e)},t.prototype.setRoomMeta=function(t,e,n,r,o){return this.sendOne({type:"set_meta",room_id:t,key:e,value:n,private:r},o)},t.prototype.updateToken=function(t,e){var n=this;return this.sendOne({type:"update_token",token:t},e).then((function(e){return n.reportError("info_update_session_token",new Error,!!t),n._sessionToken=t,e}))},t.prototype.loadRoomLogs=function(t,e){return this.sendOne(r.__assign({type:"room_logs?"},t),e)},t.prototype.subscribe=function(t,e,n){var r=this;t.forEach((function(t){var e=r._externalSubscriptions[t.resource]||[];t.notify&&e.push(t.notify),r._externalSubscriptions[t.resource]=e}));var o=t.map((function(t){return t.resource}));return this.sendOne({type:"subscription",resources:o,authorization:e},n)},t.prototype.unsubscribe=function(t,e){var n=this,r=t.filter((function(t){var e=n.removeSubscription(t.resource,t.notify||"all"),r=e.deleted,o=e.remains;return r&&0===o})).map((function(t){return t.resource}));return this.sendOne({type:"subscription_cancel",resources:r},e)},t.prototype.getMutedRooms=function(t){return this.sendOne({type:"muted_rooms?"},t)},t.prototype.muteRooms=function(t,e){return this.sendOne({type:"mute_rooms",rooms:t},e)},t.prototype.userStatus=function(t){return this.sendOne(r.__assign({type:"user_status?"},t))},t.prototype.getMsAuthStatus=function(t){return this.sendOne({type:"ms_user_auth_granted?"},t)},t.prototype.mergeMessageOptions=function(t,e,n){void 0===e&&(e="same_session"),void 0===n&&(n=5e3);var r="object"==typeof t?t:{};return{retry_policy:r.retry_policy||e,timeout_milliseconds:r.timeout_milliseconds||n,tag:r.tag,diagnostics_callback:r.diagnostics_callback,uuid:r.uuid}},t.prototype.sharedFiles=function(t){return i.map(t.uploads,(function(t){return{id:t.id}}))},t.prototype.mentions=function(t,e){var n=[],r="",o=!1,s=null,a=function(){s&&(n.push(i.clone(s)),s=null)},u=c.splitGraphemes(t.raw);return i.each(u,(function(t,n){if(o||"@"!==t)if(o){r+=t;var i=e.Ids(r);if(i.length>0){var u=i.find((function(t){return"object"==typeof t}));if(u){var c=u.match_id,f=r.length+1;s={user_id:c,pos:n-f+1,len:f}}}else"@"===t?r="":o=!1,a()}else r+=t;else a(),r="",o=!0})),s&&n.push(i.clone(s)),n},t.prototype.sendOne=function(t,e){var n=this,i=(new Date).getTime(),s=this.mergeMessageOptions(e),a=s.retry_policy,u=s.timeout_milliseconds,c=s.tag,f=s.diagnostics_callback,l=s.uuid||("string"==typeof c?c+":":"")+o.v1(),h={ts:i,uuid:l,data:t,retry_policy:a,timed_out_at_ts:i+u,session_key:this._sessionKey,diagnostics_callback:f},p=[{uuid:l,data:t}];return this.doSend(p),new Promise((function(t,e){n._inFlightList.push(r.__assign(r.__assign({},h),{resolve:t,reject:e}))}))},t.prototype.reconcileInFlight=function(t){var e=this,n=(new Date).getTime(),r=[];this._inFlightList.map((function(o){var i=o.timed_out_at_ts,s=o.reject,a=o.retry_policy,u=o.session_key,c="any_session"===a||"same_session"===a&&u===e._sessionKey;if(n>=i){var f={type:"error",code:"client_timeout"};e.collectDiagnostics(o,void 0,f),s(f)}else t&&!c?(f={type:"error",code:"session_expired"},e.collectDiagnostics(o,void 0,f),s(f)):r.push(o)})),this._inFlightList=r},t.prototype.resendInFlightList=function(){if(this.reconcileInFlight(!0),this._inFlightList.length>0){var t=i.map(this._inFlightList,(function(t){return{uuid:t.uuid,data:t.data}}));this.doSend(t)}},t.prototype.sendAck=function(t){var e=this,n=this.isInsideBundle;this.isInsideBundle=!1;try{i.chunk(t,this.ACK_UUIDS_CHUNK_SIZE).forEach((function(t){e.doSend([{ack_uuids:t,data:"ack"}])}))}finally{this.isInsideBundle=n}},t.prototype.bundle=function(t){var e,n=this.isInsideBundle;this.isInsideBundle=!0;try{e=t()}finally{this.isInsideBundle=n,n||this.flushBuffer()}return e},t.prototype.doSend=function(t){this.isInsideBundle?this.buffer=this.buffer.concat(t):this.sendToWs(t)},t.prototype.goOnline=function(t){this.resetReconnectIfConnectionIsGood.onOnline(),this._isOffline=!1,this._reconnecting=!1,this._proxy.onOnline(t)},t.prototype.goOffline=function(t){this.resetReconnectIfConnectionIsGood.onOffline(),this.reportError("going_offline",new Error,t),this._wsConnection&&this._wsConnection.shutdown(),this._isOffline=!0,this._proxy.onOffline()},t.prototype.onWsClose=function(t){var e=this;if(this.reconnectIncrement(),this._reconnecting=!1,this._isOffline||this.goOffline("ws closed ".concat(t.code," ").concat(t.reason)),1e3===t.code&&t.reason){var n=t.reason;try{n=JSON.parse(n)}catch(t){}this.reportError("websocket_fatal_error",new Error,n),this._inFlightList.map((function(t){var r=t.reject,o={type:"fatal_error",reason:n};e.collectDiagnostics(t,void 0,o),r(o)})),this._inFlightList=[]}},t.prototype.onWsConnected=function(){this.onConnected()},t.prototype.onWsError=function(t){this.reportError("websocket_error",t)},t.prototype.onConnected=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,o,i,s;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this._sessionToken)return[3,5];t=void 0,e=void 0,this._pushToken&&("fcm"===this._pushToken.type?t=this._pushToken.token:"apns"===this._pushToken.type&&(e=this._pushToken.token)),n=null,r.label=1;case 1:return r.trys.push([1,3,,4]),o=-(new Date).getTimezoneOffset(),[4,this.sendOne({type:"hello",session_key:this._sessionKey,token:this._sessionToken,tz:o,fcm_id:t,apns_token:e,capabilities:this.capabilities,client_type:this.clientType},{retry_policy:"never",timeout_milliseconds:1e4})];case 2:return n=r.sent(),[3,4];case 3:if("object"==typeof(i=r.sent())&&"type"in i&&"code"in i&&"error"===i.type){if("auth_error"===i.code)return[2,this.onWsWrongToken()];if("session_expired"===i.code)return[2];if("client_timeout"===i.code)return[2]}return this.reportError("hello_error",new Error,i),[3,4];case 4:n&&(s=this._sessionKey!==n.session_key,this._sessionKey=n.session_key,this.resendInFlightList(),s&&(this._externalSubscriptions={},this._proxy.onSync(n)),this.goOnline(n)),r.label=5;case 5:return[2]}}))}))},t.prototype.onWsWrongToken=function(){this.reportError("info_wrong_session_token",new Error),this._sessionToken=null,this._pushToken=void 0,this.resetReconnectTimer(),this._proxy.onWrongToken()},t.prototype.offlinePulse=function(){var t=this,e="object"!=typeof navigator||navigator.onLine;if(this._sessionToken&&e)if(!this._reconnecting&&this.timeBeforeNextReconnectMs()<=0){this._reconnecting=!0,this._wsConnection&&this._wsConnection.shutdown(),this._wsConnection=null;var n=new AbortController;Promise.race([this.getWsUrl(this._sessionToken,n),new Promise((function(e,r){setTimeout((function(){r("connection timeout"),n.abort()}),t.DISCOVER_TIMEOUT_MILLISECONDS)}))]).then((function(e){t._wsConnection=t.createWsConnection(e)}),(function(e){t.reportError("discover_error",e,e.req),t.reconnectIncrement(),t._reconnecting=!1}))}else this._reconnecting&&this._wsConnection&&this._wsConnection.uptime>this.RECONNECTING_TIMEOUT_MILLISECONDS&&(this.reportError("reconnecting_error",new Error,this._wsConnection),this._wsConnection.getStatus()===u.WebSocketServiceStatus.Connecting&&this.reconnectIncrement(),this._wsConnection.shutdown(),this._reconnecting=!1);else navigator.onLine||this.resetReconnectTimer(),this._wsConnection&&!this._reconnecting&&this._wsConnection.shutdown()},t.prototype.reconnectIncrement=function(){var t=(new Date).getTime(),e=Math.min(++this._reconnectCounter,7),n=Math.pow(2,e);this._nextReconnectTs=t+1e3*n},t.prototype.createWsConnection=function(t){var e=this;return new u.WebSocketConnection(this._config.WEBSOCKET_CLASS,t,{onMessage:function(t){return e.onWsMessage(t)},onConnected:function(){return e.onWsConnected()},onClose:function(t){return e.onWsClose(t)},onError:function(t){return e.onWsError(t)}})},t.prototype.getWsUrl=function(t,e){var n=e.signal;return r.__awaiter(this,void 0,void 0,(function(){var e,o,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this.useDiscover?[4,fetch(this.DISCOVER_URL,{method:"GET",headers:{Authorization:"Bearer "+t},signal:n})]:[2,this.WS_BASES[0]];case 1:if(e=r.sent(),t!==this._sessionToken)throw new Error("token changed");return 200!==e.status?[3,3]:[4,e.json()];case 2:return o=r.sent(),this._proxy.onDiscover(o),this.discoverData=o,[2,o.api_ws_base+"/ws/v1"];case 3:throw(i=new Error("discover error")).req=e,401!==e.status&&403!==e.status||(this.onWsWrongToken(),i.message="wrong token"),i}}))}))},t.prototype.membersToAccess=function(t){var e=/^\+\d+$/;return{full:t.map((function(t){return e.test(t)?{type:"contact",number:t}:{type:"user",id:t}}))}},t.prototype.collectDiagnostics=function(t,e,n){var r=t.diagnostics_callback,o=this._proxy.onDiagnostics;if(r||o){var i=(new Date).getTime(),s=t.ts,a=t.uuid,u=t.data,c=t.retry_policy,f=t.timed_out_at_ts,l=t.session_key,h={ack_elapsed:e&&e.ack_elapsed&&e.ack_elapsed[a],now:i,ts:s,uuid:a,data:u,reject_reason:n,retry_policy:c,timed_out_at_ts:f,session_key:l,current_session_key:this._sessionKey};r&&r(h),o&&o(h)}},t}();e.Proto=f},343:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketConnection=e.WebSocketServiceStatus=void 0,function(t){t[t.Initial=0]="Initial",t[t.Connecting=1]="Connecting",t[t.Open=2]="Open",t[t.ShuttingDown=3]="ShuttingDown",t[t.Close=4]="Close"}(n||(e.WebSocketServiceStatus=n={}));var r=function(){function t(t,e,r){var o=this;this._webSocketClass=t,this._url=e,this._handlers=r,this.status=n.Initial,this.createdTs=(new Date).getTime(),this.openws=function(){o._webSocketClass&&(o.status=n.Connecting,o.ws&&(o.ws.removeEventListener("open",o.handleOpen),o.ws.removeEventListener("error",o.handleError),o.ws.removeEventListener("close",o.handleClose),o.ws.removeEventListener("message",o.handleMessage),o.ws=null),o.ws=new o._webSocketClass(o._url),o.ws.addEventListener("open",o.handleOpen),o.ws.addEventListener("error",o.handleError),o.ws.addEventListener("close",o.handleClose),o.ws.addEventListener("message",o.handleMessage))},this.shutdown=function(){o._handlers=null,o.status=n.ShuttingDown,o.ws&&o.ws.close()},this.handleOpen=function(){o._handlers?(o.status=n.Open,o._handlers.onConnected()):o.shutdown()},this.handleError=function(t){o._handlers&&o._handlers.onError(new Error("Proto WebSocket error "+o._url)),o.ws&&o.ws.close()},this.handleClose=function(t){o.status=n.Close,o._handlers&&o._handlers.onClose(t)},this.handleMessage=function(t){var e=JSON.parse(t.data);o._handlers?o._handlers.onMessage(e):o.shutdown()},this.send=function(t){if(o.status===n.Open&&o.ws)try{o.ws.send(t)}catch(t){o._handlers&&o._handlers.onError(t)}},"function"==typeof this._webSocketClass?this.openws():this._handlers&&this._handlers.onError(new Error("WebSocketClass is not a function. Will not connect to server."))}return Object.defineProperty(t.prototype,"uptime",{get:function(){return(new Date).getTime()-this.createdTs},enumerable:!1,configurable:!0}),t.prototype.getStatus=function(){return this.status},t}();e.WebSocketConnection=r},856:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,n){return e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(t,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function r(t,o,i){return r=n()?Reflect.construct:function(t,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(t,o));return r&&e(i,r.prototype),i},r.apply(null,arguments)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=Object.hasOwnProperty,a=Object.setPrototypeOf,u=Object.isFrozen,c=Object.getPrototypeOf,f=Object.getOwnPropertyDescriptor,l=Object.freeze,h=Object.seal,p=Object.create,d="undefined"!=typeof Reflect&&Reflect,y=d.apply,_=d.construct;y||(y=function(t,e,n){return t.apply(e,n)}),l||(l=function(t){return t}),h||(h=function(t){return t}),_||(_=function(t,e){return r(t,o(e))});var v,m=k(Array.prototype.forEach),g=k(Array.prototype.pop),b=k(Array.prototype.push),w=k(String.prototype.toLowerCase),O=k(String.prototype.match),S=k(String.prototype.replace),E=k(String.prototype.indexOf),I=k(String.prototype.trim),A=k(RegExp.prototype.test),T=(v=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return _(v,e)});function k(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return y(t,e,r)}}function x(t,e){a&&a(t,null);for(var n=e.length;n--;){var r=e[n];if("string"==typeof r){var o=w(r);o!==r&&(u(e)||(e[n]=o),r=o)}t[r]=!0}return t}function M(t){var e,n=p(null);for(e in t)y(s,t,[e])&&(n[e]=t[e]);return n}function C(t,e){for(;null!==t;){var n=f(t,e);if(n){if(n.get)return k(n.get);if("function"==typeof n.value)return k(n.value)}t=c(t)}return function(t){return console.warn("fallback value for",t),null}}var D=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),j=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=l(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),P=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=l(["#text"]),U=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),B=l(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),F=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),q=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),W=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=h(/<%[\w\W]*|[\w\W]*%>/gm),K=h(/^data-[\-\w.\u00B7-\uFFFF]/),G=h(/^aria-[\-\w]+$/),V=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=h(/^(?:\w+script|data):/i),J=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Y=h(/^html$/i),$=function(){return"undefined"==typeof window?null:window},X=function(e,n){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var r=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(r=n.currentScript.getAttribute(o));var i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$(),r=function(t){return e(t)};if(r.version="2.3.8",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;var i=n.document,s=n.document,a=n.DocumentFragment,u=n.HTMLTemplateElement,c=n.Node,f=n.Element,h=n.NodeFilter,p=n.NamedNodeMap,d=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,y=n.HTMLFormElement,_=n.DOMParser,v=n.trustedTypes,k=f.prototype,Z=C(k,"cloneNode"),tt=C(k,"nextSibling"),et=C(k,"childNodes"),nt=C(k,"parentNode");if("function"==typeof u){var rt=s.createElement("template");rt.content&&rt.content.ownerDocument&&(s=rt.content.ownerDocument)}var ot=X(v,i),it=ot?ot.createHTML(""):"",st=s,at=st.implementation,ut=st.createNodeIterator,ct=st.createDocumentFragment,ft=st.getElementsByTagName,lt=i.importNode,ht={};try{ht=M(s).documentMode?s.documentMode:{}}catch(t){}var pt={};r.isSupported="function"==typeof nt&&at&&void 0!==at.createHTMLDocument&&9!==ht;var dt,yt,_t=W,vt=H,mt=K,gt=G,bt=Q,wt=J,Ot=V,St=null,Et=x({},[].concat(o(D),o(j),o(R),o(L),o(z))),It=null,At=x({},[].concat(o(U),o(B),o(F),o(q))),Tt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kt=null,xt=null,Mt=!0,Ct=!0,Dt=!1,jt=!1,Rt=!1,Nt=!1,Lt=!1,Pt=!1,zt=!1,Ut=!1,Bt=!0,Ft=!0,qt=!1,Wt={},Ht=null,Kt=x({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Gt=null,Vt=x({},["audio","video","img","source","image","track"]),Qt=null,Jt=x({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml",Zt=Xt,te=!1,ee=["application/xhtml+xml","text/html"],ne="text/html",re=null,oe=s.createElement("form"),ie=function(t){return t instanceof RegExp||t instanceof Function},se=function(e){re&&re===e||(e&&"object"===t(e)||(e={}),e=M(e),St="ALLOWED_TAGS"in e?x({},e.ALLOWED_TAGS):Et,It="ALLOWED_ATTR"in e?x({},e.ALLOWED_ATTR):At,Qt="ADD_URI_SAFE_ATTR"in e?x(M(Jt),e.ADD_URI_SAFE_ATTR):Jt,Gt="ADD_DATA_URI_TAGS"in e?x(M(Vt),e.ADD_DATA_URI_TAGS):Vt,Ht="FORBID_CONTENTS"in e?x({},e.FORBID_CONTENTS):Kt,kt="FORBID_TAGS"in e?x({},e.FORBID_TAGS):{},xt="FORBID_ATTR"in e?x({},e.FORBID_ATTR):{},Wt="USE_PROFILES"in e&&e.USE_PROFILES,Mt=!1!==e.ALLOW_ARIA_ATTR,Ct=!1!==e.ALLOW_DATA_ATTR,Dt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=e.SAFE_FOR_TEMPLATES||!1,Rt=e.WHOLE_DOCUMENT||!1,Pt=e.RETURN_DOM||!1,zt=e.RETURN_DOM_FRAGMENT||!1,Ut=e.RETURN_TRUSTED_TYPE||!1,Lt=e.FORCE_BODY||!1,Bt=!1!==e.SANITIZE_DOM,Ft=!1!==e.KEEP_CONTENT,qt=e.IN_PLACE||!1,Ot=e.ALLOWED_URI_REGEXP||Ot,Zt=e.NAMESPACE||Xt,e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Tt.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Tt.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Tt.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt=dt=-1===ee.indexOf(e.PARSER_MEDIA_TYPE)?ne:e.PARSER_MEDIA_TYPE,yt="application/xhtml+xml"===dt?function(t){return t}:w,jt&&(Ct=!1),zt&&(Pt=!0),Wt&&(St=x({},o(z)),It=[],!0===Wt.html&&(x(St,D),x(It,U)),!0===Wt.svg&&(x(St,j),x(It,B),x(It,q)),!0===Wt.svgFilters&&(x(St,R),x(It,B),x(It,q)),!0===Wt.mathMl&&(x(St,L),x(It,F),x(It,q))),e.ADD_TAGS&&(St===Et&&(St=M(St)),x(St,e.ADD_TAGS)),e.ADD_ATTR&&(It===At&&(It=M(It)),x(It,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&x(Qt,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ht===Kt&&(Ht=M(Ht)),x(Ht,e.FORBID_CONTENTS)),Ft&&(St["#text"]=!0),Rt&&x(St,["html","head","body"]),St.table&&(x(St,["tbody"]),delete kt.tbody),l&&l(e),re=e)},ae=x({},["mi","mo","mn","ms","mtext"]),ue=x({},["foreignobject","desc","title","annotation-xml"]),ce=x({},["title","style","font","a","script"]),fe=x({},j);x(fe,R),x(fe,N);var le=x({},L);x(le,P);var he=function(t){var e=nt(t);e&&e.tagName||(e={namespaceURI:Xt,tagName:"template"});var n=w(t.tagName),r=w(e.tagName);return t.namespaceURI===$t?e.namespaceURI===Xt?"svg"===n:e.namespaceURI===Yt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(fe[n]):t.namespaceURI===Yt?e.namespaceURI===Xt?"math"===n:e.namespaceURI===$t?"math"===n&&ue[r]:Boolean(le[n]):t.namespaceURI===Xt&&!(e.namespaceURI===$t&&!ue[r])&&!(e.namespaceURI===Yt&&!ae[r])&&!le[n]&&(ce[n]||!fe[n])},pe=function(t){b(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=it}catch(e){t.remove()}}},de=function(t,e){try{b(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){b(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!It[t])if(Pt||zt)try{pe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ye=function(t){var e,n;if(Lt)t="<remove></remove>"+t;else{var r=O(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===dt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=ot?ot.createHTML(t):t;if(Zt===Xt)try{e=(new _).parseFromString(o,dt)}catch(t){}if(!e||!e.documentElement){e=at.createDocument(Zt,"template",null);try{e.documentElement.innerHTML=te?"":o}catch(t){}}var i=e.body||e.documentElement;return t&&n&&i.insertBefore(s.createTextNode(n),i.childNodes[0]||null),Zt===Xt?ft.call(e,Rt?"html":"body")[0]:Rt?e.documentElement:i},_e=function(t){return ut.call(t.ownerDocument||t,t,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},ve=function(t){return t instanceof y&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof d)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},me=function(e){return"object"===t(c)?e instanceof c:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ge=function(t,e,n){pt[t]&&m(pt[t],(function(t){t.call(r,e,n,re)}))},be=function(t){var e;if(ge("beforeSanitizeElements",t,null),ve(t))return pe(t),!0;if(A(/[\u0080-\uFFFF]/,t.nodeName))return pe(t),!0;var n=yt(t.nodeName);if(ge("uponSanitizeElement",t,{tagName:n,allowedTags:St}),t.hasChildNodes()&&!me(t.firstElementChild)&&(!me(t.content)||!me(t.content.firstElementChild))&&A(/<[/\w]/g,t.innerHTML)&&A(/<[/\w]/g,t.textContent))return pe(t),!0;if("select"===n&&A(/<template/i,t.innerHTML))return pe(t),!0;if(!St[n]||kt[n]){if(!kt[n]&&Oe(n)){if(Tt.tagNameCheck instanceof RegExp&&A(Tt.tagNameCheck,n))return!1;if(Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(n))return!1}if(Ft&&!Ht[n]){var o=nt(t)||t.parentNode,i=et(t)||t.childNodes;if(i&&o)for(var s=i.length-1;s>=0;--s)o.insertBefore(Z(i[s],!0),tt(t))}return pe(t),!0}return t instanceof f&&!he(t)?(pe(t),!0):"noscript"!==n&&"noembed"!==n||!A(/<\/no(script|embed)/i,t.innerHTML)?(jt&&3===t.nodeType&&(e=t.textContent,e=S(e,_t," "),e=S(e,vt," "),t.textContent!==e&&(b(r.removed,{element:t.cloneNode()}),t.textContent=e)),ge("afterSanitizeElements",t,null),!1):(pe(t),!0)},we=function(t,e,n){if(Bt&&("id"===e||"name"===e)&&(n in s||n in oe))return!1;if(Ct&&!xt[e]&&A(mt,e));else if(Mt&&A(gt,e));else if(!It[e]||xt[e]){if(!(Oe(t)&&(Tt.tagNameCheck instanceof RegExp&&A(Tt.tagNameCheck,t)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(t))&&(Tt.attributeNameCheck instanceof RegExp&&A(Tt.attributeNameCheck,e)||Tt.attributeNameCheck instanceof Function&&Tt.attributeNameCheck(e))||"is"===e&&Tt.allowCustomizedBuiltInElements&&(Tt.tagNameCheck instanceof RegExp&&A(Tt.tagNameCheck,n)||Tt.tagNameCheck instanceof Function&&Tt.tagNameCheck(n))))return!1}else if(Qt[e]);else if(A(Ot,S(n,wt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==E(n,"data:")||!Gt[t])if(Dt&&!A(bt,S(n,wt,"")));else if(n)return!1;return!0},Oe=function(t){return t.indexOf("-")>0},Se=function(t){var e,n,o,i;ge("beforeSanitizeAttributes",t,null);var s=t.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(i=s.length;i--;){var u=e=s[i],c=u.name,f=u.namespaceURI;if(n="value"===c?e.value:I(e.value),o=yt(c),a.attrName=o,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,ge("uponSanitizeAttribute",t,a),n=a.attrValue,!a.forceKeepAttr&&(de(c,t),a.keepAttr))if(A(/\/>/i,n))de(c,t);else{jt&&(n=S(n,_t," "),n=S(n,vt," "));var l=yt(t.nodeName);if(we(l,o,n))try{f?t.setAttributeNS(f,c,n):t.setAttribute(c,n),g(r.removed)}catch(t){}}}ge("afterSanitizeAttributes",t,null)}},Ee=function t(e){var n,r=_e(e);for(ge("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)ge("uponSanitizeShadowNode",n,null),be(n)||(n.content instanceof a&&t(n.content),Se(n));ge("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(e,o){var s,u,f,l,h;if((te=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!me(e)){if("function"!=typeof e.toString)throw T("toString is not a function");if("string"!=typeof(e=e.toString()))throw T("dirty is not a string, aborting")}if(!r.isSupported){if("object"===t(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof e)return n.toStaticHTML(e);if(me(e))return n.toStaticHTML(e.outerHTML)}return e}if(Nt||se(o),r.removed=[],"string"==typeof e&&(qt=!1),qt){if(e.nodeName){var p=yt(e.nodeName);if(!St[p]||kt[p])throw T("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(u=(s=ye("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===u.nodeName||"HTML"===u.nodeName?s=u:s.appendChild(u);else{if(!Pt&&!jt&&!Rt&&-1===e.indexOf("<"))return ot&&Ut?ot.createHTML(e):e;if(!(s=ye(e)))return Pt?null:Ut?it:""}s&&Lt&&pe(s.firstChild);for(var d=_e(qt?e:s);f=d.nextNode();)3===f.nodeType&&f===l||be(f)||(f.content instanceof a&&Ee(f.content),Se(f),l=f);if(l=null,qt)return e;if(Pt){if(zt)for(h=ct.call(s.ownerDocument);s.firstChild;)h.appendChild(s.firstChild);else h=s;return It.shadowroot&&(h=lt.call(i,h,!0)),h}var y=Rt?s.outerHTML:s.innerHTML;return Rt&&St["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&A(Y,s.ownerDocument.doctype.name)&&(y="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+y),jt&&(y=S(y,_t," "),y=S(y,vt," ")),ot&&Ut?ot.createHTML(y):y},r.setConfig=function(t){se(t),Nt=!0},r.clearConfig=function(){re=null,Nt=!1},r.isValidAttribute=function(t,e,n){re||se({});var r=yt(t),o=yt(e);return we(r,o,n)},r.addHook=function(t,e){"function"==typeof e&&(pt[t]=pt[t]||[],b(pt[t],e))},r.removeHook=function(t){if(pt[t])return g(pt[t])},r.removeHooks=function(t){pt[t]&&(pt[t]=[])},r.removeAllHooks=function(){pt={}},r}()}()},323:t=>{t.exports&&(t.exports=function(){var t=3,e=4,n=12,r=13,o=16,i=17;function s(t,e){void 0===e&&(e=0);var n=t.charCodeAt(e);if(55296<=n&&n<=56319&&e<t.length-1){var r=n;return 56320<=(o=t.charCodeAt(e+1))&&o<=57343?1024*(r-55296)+(o-56320)+65536:r}if(56320<=n&&n<=57343&&e>=1){var o=n;return 55296<=(r=t.charCodeAt(e-1))&&r<=56319?1024*(r-55296)+(o-56320)+65536:o}return n}function a(s,a,u){var c=[s].concat(a).concat([u]),f=c[c.length-2],l=u,h=c.lastIndexOf(14);if(h>1&&c.slice(1,h).every((function(e){return e==t}))&&-1==[t,r,i].indexOf(s))return 2;var p=c.lastIndexOf(e);if(p>0&&c.slice(1,p).every((function(t){return t==e}))&&-1==[n,e].indexOf(f))return c.filter((function(t){return t==e})).length%2==1?3:4;if(0==f&&1==l)return 0;if(2==f||0==f||1==f)return 14==l&&a.every((function(e){return e==t}))?2:1;if(2==l||0==l||1==l)return 1;if(6==f&&(6==l||7==l||9==l||10==l))return 0;if(!(9!=f&&7!=f||7!=l&&8!=l))return 0;if((10==f||8==f)&&8==l)return 0;if(l==t||15==l)return 0;if(5==l)return 0;if(f==n)return 0;var d=-1!=c.indexOf(t)?c.lastIndexOf(t)-1:c.length-2;return-1!=[r,i].indexOf(c[d])&&c.slice(d+1,-1).every((function(e){return e==t}))&&14==l||15==f&&-1!=[o,i].indexOf(l)?0:-1!=a.indexOf(e)?2:f==e&&l==e?0:1}function u(s){return 1536<=s&&s<=1541||1757==s||1807==s||2274==s||3406==s||69821==s||70082<=s&&s<=70083||72250==s||72326<=s&&s<=72329||73030==s?n:13==s?0:10==s?1:0<=s&&s<=9||11<=s&&s<=12||14<=s&&s<=31||127<=s&&s<=159||173==s||1564==s||6158==s||8203==s||8206<=s&&s<=8207||8232==s||8233==s||8234<=s&&s<=8238||8288<=s&&s<=8292||8293==s||8294<=s&&s<=8303||55296<=s&&s<=57343||65279==s||65520<=s&&s<=65528||65529<=s&&s<=65531||113824<=s&&s<=113827||119155<=s&&s<=119162||917504==s||917505==s||917506<=s&&s<=917535||917632<=s&&s<=917759||918e3<=s&&s<=921599?2:768<=s&&s<=879||1155<=s&&s<=1159||1160<=s&&s<=1161||1425<=s&&s<=1469||1471==s||1473<=s&&s<=1474||1476<=s&&s<=1477||1479==s||1552<=s&&s<=1562||1611<=s&&s<=1631||1648==s||1750<=s&&s<=1756||1759<=s&&s<=1764||1767<=s&&s<=1768||1770<=s&&s<=1773||1809==s||1840<=s&&s<=1866||1958<=s&&s<=1968||2027<=s&&s<=2035||2070<=s&&s<=2073||2075<=s&&s<=2083||2085<=s&&s<=2087||2089<=s&&s<=2093||2137<=s&&s<=2139||2260<=s&&s<=2273||2275<=s&&s<=2306||2362==s||2364==s||2369<=s&&s<=2376||2381==s||2385<=s&&s<=2391||2402<=s&&s<=2403||2433==s||2492==s||2494==s||2497<=s&&s<=2500||2509==s||2519==s||2530<=s&&s<=2531||2561<=s&&s<=2562||2620==s||2625<=s&&s<=2626||2631<=s&&s<=2632||2635<=s&&s<=2637||2641==s||2672<=s&&s<=2673||2677==s||2689<=s&&s<=2690||2748==s||2753<=s&&s<=2757||2759<=s&&s<=2760||2765==s||2786<=s&&s<=2787||2810<=s&&s<=2815||2817==s||2876==s||2878==s||2879==s||2881<=s&&s<=2884||2893==s||2902==s||2903==s||2914<=s&&s<=2915||2946==s||3006==s||3008==s||3021==s||3031==s||3072==s||3134<=s&&s<=3136||3142<=s&&s<=3144||3146<=s&&s<=3149||3157<=s&&s<=3158||3170<=s&&s<=3171||3201==s||3260==s||3263==s||3266==s||3270==s||3276<=s&&s<=3277||3285<=s&&s<=3286||3298<=s&&s<=3299||3328<=s&&s<=3329||3387<=s&&s<=3388||3390==s||3393<=s&&s<=3396||3405==s||3415==s||3426<=s&&s<=3427||3530==s||3535==s||3538<=s&&s<=3540||3542==s||3551==s||3633==s||3636<=s&&s<=3642||3655<=s&&s<=3662||3761==s||3764<=s&&s<=3769||3771<=s&&s<=3772||3784<=s&&s<=3789||3864<=s&&s<=3865||3893==s||3895==s||3897==s||3953<=s&&s<=3966||3968<=s&&s<=3972||3974<=s&&s<=3975||3981<=s&&s<=3991||3993<=s&&s<=4028||4038==s||4141<=s&&s<=4144||4146<=s&&s<=4151||4153<=s&&s<=4154||4157<=s&&s<=4158||4184<=s&&s<=4185||4190<=s&&s<=4192||4209<=s&&s<=4212||4226==s||4229<=s&&s<=4230||4237==s||4253==s||4957<=s&&s<=4959||5906<=s&&s<=5908||5938<=s&&s<=5940||5970<=s&&s<=5971||6002<=s&&s<=6003||6068<=s&&s<=6069||6071<=s&&s<=6077||6086==s||6089<=s&&s<=6099||6109==s||6155<=s&&s<=6157||6277<=s&&s<=6278||6313==s||6432<=s&&s<=6434||6439<=s&&s<=6440||6450==s||6457<=s&&s<=6459||6679<=s&&s<=6680||6683==s||6742==s||6744<=s&&s<=6750||6752==s||6754==s||6757<=s&&s<=6764||6771<=s&&s<=6780||6783==s||6832<=s&&s<=6845||6846==s||6912<=s&&s<=6915||6964==s||6966<=s&&s<=6970||6972==s||6978==s||7019<=s&&s<=7027||7040<=s&&s<=7041||7074<=s&&s<=7077||7080<=s&&s<=7081||7083<=s&&s<=7085||7142==s||7144<=s&&s<=7145||7149==s||7151<=s&&s<=7153||7212<=s&&s<=7219||7222<=s&&s<=7223||7376<=s&&s<=7378||7380<=s&&s<=7392||7394<=s&&s<=7400||7405==s||7412==s||7416<=s&&s<=7417||7616<=s&&s<=7673||7675<=s&&s<=7679||8204==s||8400<=s&&s<=8412||8413<=s&&s<=8416||8417==s||8418<=s&&s<=8420||8421<=s&&s<=8432||11503<=s&&s<=11505||11647==s||11744<=s&&s<=11775||12330<=s&&s<=12333||12334<=s&&s<=12335||12441<=s&&s<=12442||42607==s||42608<=s&&s<=42610||42612<=s&&s<=42621||42654<=s&&s<=42655||42736<=s&&s<=42737||43010==s||43014==s||43019==s||43045<=s&&s<=43046||43204<=s&&s<=43205||43232<=s&&s<=43249||43302<=s&&s<=43309||43335<=s&&s<=43345||43392<=s&&s<=43394||43443==s||43446<=s&&s<=43449||43452==s||43493==s||43561<=s&&s<=43566||43569<=s&&s<=43570||43573<=s&&s<=43574||43587==s||43596==s||43644==s||43696==s||43698<=s&&s<=43700||43703<=s&&s<=43704||43710<=s&&s<=43711||43713==s||43756<=s&&s<=43757||43766==s||44005==s||44008==s||44013==s||64286==s||65024<=s&&s<=65039||65056<=s&&s<=65071||65438<=s&&s<=65439||66045==s||66272==s||66422<=s&&s<=66426||68097<=s&&s<=68099||68101<=s&&s<=68102||68108<=s&&s<=68111||68152<=s&&s<=68154||68159==s||68325<=s&&s<=68326||69633==s||69688<=s&&s<=69702||69759<=s&&s<=69761||69811<=s&&s<=69814||69817<=s&&s<=69818||69888<=s&&s<=69890||69927<=s&&s<=69931||69933<=s&&s<=69940||70003==s||70016<=s&&s<=70017||70070<=s&&s<=70078||70090<=s&&s<=70092||70191<=s&&s<=70193||70196==s||70198<=s&&s<=70199||70206==s||70367==s||70371<=s&&s<=70378||70400<=s&&s<=70401||70460==s||70462==s||70464==s||70487==s||70502<=s&&s<=70508||70512<=s&&s<=70516||70712<=s&&s<=70719||70722<=s&&s<=70724||70726==s||70832==s||70835<=s&&s<=70840||70842==s||70845==s||70847<=s&&s<=70848||70850<=s&&s<=70851||71087==s||71090<=s&&s<=71093||71100<=s&&s<=71101||71103<=s&&s<=71104||71132<=s&&s<=71133||71219<=s&&s<=71226||71229==s||71231<=s&&s<=71232||71339==s||71341==s||71344<=s&&s<=71349||71351==s||71453<=s&&s<=71455||71458<=s&&s<=71461||71463<=s&&s<=71467||72193<=s&&s<=72198||72201<=s&&s<=72202||72243<=s&&s<=72248||72251<=s&&s<=72254||72263==s||72273<=s&&s<=72278||72281<=s&&s<=72283||72330<=s&&s<=72342||72344<=s&&s<=72345||72752<=s&&s<=72758||72760<=s&&s<=72765||72767==s||72850<=s&&s<=72871||72874<=s&&s<=72880||72882<=s&&s<=72883||72885<=s&&s<=72886||73009<=s&&s<=73014||73018==s||73020<=s&&s<=73021||73023<=s&&s<=73029||73031==s||92912<=s&&s<=92916||92976<=s&&s<=92982||94095<=s&&s<=94098||113821<=s&&s<=113822||119141==s||119143<=s&&s<=119145||119150<=s&&s<=119154||119163<=s&&s<=119170||119173<=s&&s<=119179||119210<=s&&s<=119213||119362<=s&&s<=119364||121344<=s&&s<=121398||121403<=s&&s<=121452||121461==s||121476==s||121499<=s&&s<=121503||121505<=s&&s<=121519||122880<=s&&s<=122886||122888<=s&&s<=122904||122907<=s&&s<=122913||122915<=s&&s<=122916||122918<=s&&s<=122922||125136<=s&&s<=125142||125252<=s&&s<=125258||917536<=s&&s<=917631||917760<=s&&s<=917999?t:127462<=s&&s<=127487?e:2307==s||2363==s||2366<=s&&s<=2368||2377<=s&&s<=2380||2382<=s&&s<=2383||2434<=s&&s<=2435||2495<=s&&s<=2496||2503<=s&&s<=2504||2507<=s&&s<=2508||2563==s||2622<=s&&s<=2624||2691==s||2750<=s&&s<=2752||2761==s||2763<=s&&s<=2764||2818<=s&&s<=2819||2880==s||2887<=s&&s<=2888||2891<=s&&s<=2892||3007==s||3009<=s&&s<=3010||3014<=s&&s<=3016||3018<=s&&s<=3020||3073<=s&&s<=3075||3137<=s&&s<=3140||3202<=s&&s<=3203||3262==s||3264<=s&&s<=3265||3267<=s&&s<=3268||3271<=s&&s<=3272||3274<=s&&s<=3275||3330<=s&&s<=3331||3391<=s&&s<=3392||3398<=s&&s<=3400||3402<=s&&s<=3404||3458<=s&&s<=3459||3536<=s&&s<=3537||3544<=s&&s<=3550||3570<=s&&s<=3571||3635==s||3763==s||3902<=s&&s<=3903||3967==s||4145==s||4155<=s&&s<=4156||4182<=s&&s<=4183||4228==s||6070==s||6078<=s&&s<=6085||6087<=s&&s<=6088||6435<=s&&s<=6438||6441<=s&&s<=6443||6448<=s&&s<=6449||6451<=s&&s<=6456||6681<=s&&s<=6682||6741==s||6743==s||6765<=s&&s<=6770||6916==s||6965==s||6971==s||6973<=s&&s<=6977||6979<=s&&s<=6980||7042==s||7073==s||7078<=s&&s<=7079||7082==s||7143==s||7146<=s&&s<=7148||7150==s||7154<=s&&s<=7155||7204<=s&&s<=7211||7220<=s&&s<=7221||7393==s||7410<=s&&s<=7411||7415==s||43043<=s&&s<=43044||43047==s||43136<=s&&s<=43137||43188<=s&&s<=43203||43346<=s&&s<=43347||43395==s||43444<=s&&s<=43445||43450<=s&&s<=43451||43453<=s&&s<=43456||43567<=s&&s<=43568||43571<=s&&s<=43572||43597==s||43755==s||43758<=s&&s<=43759||43765==s||44003<=s&&s<=44004||44006<=s&&s<=44007||44009<=s&&s<=44010||44012==s||69632==s||69634==s||69762==s||69808<=s&&s<=69810||69815<=s&&s<=69816||69932==s||70018==s||70067<=s&&s<=70069||70079<=s&&s<=70080||70188<=s&&s<=70190||70194<=s&&s<=70195||70197==s||70368<=s&&s<=70370||70402<=s&&s<=70403||70463==s||70465<=s&&s<=70468||70471<=s&&s<=70472||70475<=s&&s<=70477||70498<=s&&s<=70499||70709<=s&&s<=70711||70720<=s&&s<=70721||70725==s||70833<=s&&s<=70834||70841==s||70843<=s&&s<=70844||70846==s||70849==s||71088<=s&&s<=71089||71096<=s&&s<=71099||71102==s||71216<=s&&s<=71218||71227<=s&&s<=71228||71230==s||71340==s||71342<=s&&s<=71343||71350==s||71456<=s&&s<=71457||71462==s||72199<=s&&s<=72200||72249==s||72279<=s&&s<=72280||72343==s||72751==s||72766==s||72873==s||72881==s||72884==s||94033<=s&&s<=94078||119142==s||119149==s?5:4352<=s&&s<=4447||43360<=s&&s<=43388?6:4448<=s&&s<=4519||55216<=s&&s<=55238?7:4520<=s&&s<=4607||55243<=s&&s<=55291?8:44032==s||44060==s||44088==s||44116==s||44144==s||44172==s||44200==s||44228==s||44256==s||44284==s||44312==s||44340==s||44368==s||44396==s||44424==s||44452==s||44480==s||44508==s||44536==s||44564==s||44592==s||44620==s||44648==s||44676==s||44704==s||44732==s||44760==s||44788==s||44816==s||44844==s||44872==s||44900==s||44928==s||44956==s||44984==s||45012==s||45040==s||45068==s||45096==s||45124==s||45152==s||45180==s||45208==s||45236==s||45264==s||45292==s||45320==s||45348==s||45376==s||45404==s||45432==s||45460==s||45488==s||45516==s||45544==s||45572==s||45600==s||45628==s||45656==s||45684==s||45712==s||45740==s||45768==s||45796==s||45824==s||45852==s||45880==s||45908==s||45936==s||45964==s||45992==s||46020==s||46048==s||46076==s||46104==s||46132==s||46160==s||46188==s||46216==s||46244==s||46272==s||46300==s||46328==s||46356==s||46384==s||46412==s||46440==s||46468==s||46496==s||46524==s||46552==s||46580==s||46608==s||46636==s||46664==s||46692==s||46720==s||46748==s||46776==s||46804==s||46832==s||46860==s||46888==s||46916==s||46944==s||46972==s||47e3==s||47028==s||47056==s||47084==s||47112==s||47140==s||47168==s||47196==s||47224==s||47252==s||47280==s||47308==s||47336==s||47364==s||47392==s||47420==s||47448==s||47476==s||47504==s||47532==s||47560==s||47588==s||47616==s||47644==s||47672==s||47700==s||47728==s||47756==s||47784==s||47812==s||47840==s||47868==s||47896==s||47924==s||47952==s||47980==s||48008==s||48036==s||48064==s||48092==s||48120==s||48148==s||48176==s||48204==s||48232==s||48260==s||48288==s||48316==s||48344==s||48372==s||48400==s||48428==s||48456==s||48484==s||48512==s||48540==s||48568==s||48596==s||48624==s||48652==s||48680==s||48708==s||48736==s||48764==s||48792==s||48820==s||48848==s||48876==s||48904==s||48932==s||48960==s||48988==s||49016==s||49044==s||49072==s||49100==s||49128==s||49156==s||49184==s||49212==s||49240==s||49268==s||49296==s||49324==s||49352==s||49380==s||49408==s||49436==s||49464==s||49492==s||49520==s||49548==s||49576==s||49604==s||49632==s||49660==s||49688==s||49716==s||49744==s||49772==s||49800==s||49828==s||49856==s||49884==s||49912==s||49940==s||49968==s||49996==s||50024==s||50052==s||50080==s||50108==s||50136==s||50164==s||50192==s||50220==s||50248==s||50276==s||50304==s||50332==s||50360==s||50388==s||50416==s||50444==s||50472==s||50500==s||50528==s||50556==s||50584==s||50612==s||50640==s||50668==s||50696==s||50724==s||50752==s||50780==s||50808==s||50836==s||50864==s||50892==s||50920==s||50948==s||50976==s||51004==s||51032==s||51060==s||51088==s||51116==s||51144==s||51172==s||51200==s||51228==s||51256==s||51284==s||51312==s||51340==s||51368==s||51396==s||51424==s||51452==s||51480==s||51508==s||51536==s||51564==s||51592==s||51620==s||51648==s||51676==s||51704==s||51732==s||51760==s||51788==s||51816==s||51844==s||51872==s||51900==s||51928==s||51956==s||51984==s||52012==s||52040==s||52068==s||52096==s||52124==s||52152==s||52180==s||52208==s||52236==s||52264==s||52292==s||52320==s||52348==s||52376==s||52404==s||52432==s||52460==s||52488==s||52516==s||52544==s||52572==s||52600==s||52628==s||52656==s||52684==s||52712==s||52740==s||52768==s||52796==s||52824==s||52852==s||52880==s||52908==s||52936==s||52964==s||52992==s||53020==s||53048==s||53076==s||53104==s||53132==s||53160==s||53188==s||53216==s||53244==s||53272==s||53300==s||53328==s||53356==s||53384==s||53412==s||53440==s||53468==s||53496==s||53524==s||53552==s||53580==s||53608==s||53636==s||53664==s||53692==s||53720==s||53748==s||53776==s||53804==s||53832==s||53860==s||53888==s||53916==s||53944==s||53972==s||54e3==s||54028==s||54056==s||54084==s||54112==s||54140==s||54168==s||54196==s||54224==s||54252==s||54280==s||54308==s||54336==s||54364==s||54392==s||54420==s||54448==s||54476==s||54504==s||54532==s||54560==s||54588==s||54616==s||54644==s||54672==s||54700==s||54728==s||54756==s||54784==s||54812==s||54840==s||54868==s||54896==s||54924==s||54952==s||54980==s||55008==s||55036==s||55064==s||55092==s||55120==s||55148==s||55176==s?9:44033<=s&&s<=44059||44061<=s&&s<=44087||44089<=s&&s<=44115||44117<=s&&s<=44143||44145<=s&&s<=44171||44173<=s&&s<=44199||44201<=s&&s<=44227||44229<=s&&s<=44255||44257<=s&&s<=44283||44285<=s&&s<=44311||44313<=s&&s<=44339||44341<=s&&s<=44367||44369<=s&&s<=44395||44397<=s&&s<=44423||44425<=s&&s<=44451||44453<=s&&s<=44479||44481<=s&&s<=44507||44509<=s&&s<=44535||44537<=s&&s<=44563||44565<=s&&s<=44591||44593<=s&&s<=44619||44621<=s&&s<=44647||44649<=s&&s<=44675||44677<=s&&s<=44703||44705<=s&&s<=44731||44733<=s&&s<=44759||44761<=s&&s<=44787||44789<=s&&s<=44815||44817<=s&&s<=44843||44845<=s&&s<=44871||44873<=s&&s<=44899||44901<=s&&s<=44927||44929<=s&&s<=44955||44957<=s&&s<=44983||44985<=s&&s<=45011||45013<=s&&s<=45039||45041<=s&&s<=45067||45069<=s&&s<=45095||45097<=s&&s<=45123||45125<=s&&s<=45151||45153<=s&&s<=45179||45181<=s&&s<=45207||45209<=s&&s<=45235||45237<=s&&s<=45263||45265<=s&&s<=45291||45293<=s&&s<=45319||45321<=s&&s<=45347||45349<=s&&s<=45375||45377<=s&&s<=45403||45405<=s&&s<=45431||45433<=s&&s<=45459||45461<=s&&s<=45487||45489<=s&&s<=45515||45517<=s&&s<=45543||45545<=s&&s<=45571||45573<=s&&s<=45599||45601<=s&&s<=45627||45629<=s&&s<=45655||45657<=s&&s<=45683||45685<=s&&s<=45711||45713<=s&&s<=45739||45741<=s&&s<=45767||45769<=s&&s<=45795||45797<=s&&s<=45823||45825<=s&&s<=45851||45853<=s&&s<=45879||45881<=s&&s<=45907||45909<=s&&s<=45935||45937<=s&&s<=45963||45965<=s&&s<=45991||45993<=s&&s<=46019||46021<=s&&s<=46047||46049<=s&&s<=46075||46077<=s&&s<=46103||46105<=s&&s<=46131||46133<=s&&s<=46159||46161<=s&&s<=46187||46189<=s&&s<=46215||46217<=s&&s<=46243||46245<=s&&s<=46271||46273<=s&&s<=46299||46301<=s&&s<=46327||46329<=s&&s<=46355||46357<=s&&s<=46383||46385<=s&&s<=46411||46413<=s&&s<=46439||46441<=s&&s<=46467||46469<=s&&s<=46495||46497<=s&&s<=46523||46525<=s&&s<=46551||46553<=s&&s<=46579||46581<=s&&s<=46607||46609<=s&&s<=46635||46637<=s&&s<=46663||46665<=s&&s<=46691||46693<=s&&s<=46719||46721<=s&&s<=46747||46749<=s&&s<=46775||46777<=s&&s<=46803||46805<=s&&s<=46831||46833<=s&&s<=46859||46861<=s&&s<=46887||46889<=s&&s<=46915||46917<=s&&s<=46943||46945<=s&&s<=46971||46973<=s&&s<=46999||47001<=s&&s<=47027||47029<=s&&s<=47055||47057<=s&&s<=47083||47085<=s&&s<=47111||47113<=s&&s<=47139||47141<=s&&s<=47167||47169<=s&&s<=47195||47197<=s&&s<=47223||47225<=s&&s<=47251||47253<=s&&s<=47279||47281<=s&&s<=47307||47309<=s&&s<=47335||47337<=s&&s<=47363||47365<=s&&s<=47391||47393<=s&&s<=47419||47421<=s&&s<=47447||47449<=s&&s<=47475||47477<=s&&s<=47503||47505<=s&&s<=47531||47533<=s&&s<=47559||47561<=s&&s<=47587||47589<=s&&s<=47615||47617<=s&&s<=47643||47645<=s&&s<=47671||47673<=s&&s<=47699||47701<=s&&s<=47727||47729<=s&&s<=47755||47757<=s&&s<=47783||47785<=s&&s<=47811||47813<=s&&s<=47839||47841<=s&&s<=47867||47869<=s&&s<=47895||47897<=s&&s<=47923||47925<=s&&s<=47951||47953<=s&&s<=47979||47981<=s&&s<=48007||48009<=s&&s<=48035||48037<=s&&s<=48063||48065<=s&&s<=48091||48093<=s&&s<=48119||48121<=s&&s<=48147||48149<=s&&s<=48175||48177<=s&&s<=48203||48205<=s&&s<=48231||48233<=s&&s<=48259||48261<=s&&s<=48287||48289<=s&&s<=48315||48317<=s&&s<=48343||48345<=s&&s<=48371||48373<=s&&s<=48399||48401<=s&&s<=48427||48429<=s&&s<=48455||48457<=s&&s<=48483||48485<=s&&s<=48511||48513<=s&&s<=48539||48541<=s&&s<=48567||48569<=s&&s<=48595||48597<=s&&s<=48623||48625<=s&&s<=48651||48653<=s&&s<=48679||48681<=s&&s<=48707||48709<=s&&s<=48735||48737<=s&&s<=48763||48765<=s&&s<=48791||48793<=s&&s<=48819||48821<=s&&s<=48847||48849<=s&&s<=48875||48877<=s&&s<=48903||48905<=s&&s<=48931||48933<=s&&s<=48959||48961<=s&&s<=48987||48989<=s&&s<=49015||49017<=s&&s<=49043||49045<=s&&s<=49071||49073<=s&&s<=49099||49101<=s&&s<=49127||49129<=s&&s<=49155||49157<=s&&s<=49183||49185<=s&&s<=49211||49213<=s&&s<=49239||49241<=s&&s<=49267||49269<=s&&s<=49295||49297<=s&&s<=49323||49325<=s&&s<=49351||49353<=s&&s<=49379||49381<=s&&s<=49407||49409<=s&&s<=49435||49437<=s&&s<=49463||49465<=s&&s<=49491||49493<=s&&s<=49519||49521<=s&&s<=49547||49549<=s&&s<=49575||49577<=s&&s<=49603||49605<=s&&s<=49631||49633<=s&&s<=49659||49661<=s&&s<=49687||49689<=s&&s<=49715||49717<=s&&s<=49743||49745<=s&&s<=49771||49773<=s&&s<=49799||49801<=s&&s<=49827||49829<=s&&s<=49855||49857<=s&&s<=49883||49885<=s&&s<=49911||49913<=s&&s<=49939||49941<=s&&s<=49967||49969<=s&&s<=49995||49997<=s&&s<=50023||50025<=s&&s<=50051||50053<=s&&s<=50079||50081<=s&&s<=50107||50109<=s&&s<=50135||50137<=s&&s<=50163||50165<=s&&s<=50191||50193<=s&&s<=50219||50221<=s&&s<=50247||50249<=s&&s<=50275||50277<=s&&s<=50303||50305<=s&&s<=50331||50333<=s&&s<=50359||50361<=s&&s<=50387||50389<=s&&s<=50415||50417<=s&&s<=50443||50445<=s&&s<=50471||50473<=s&&s<=50499||50501<=s&&s<=50527||50529<=s&&s<=50555||50557<=s&&s<=50583||50585<=s&&s<=50611||50613<=s&&s<=50639||50641<=s&&s<=50667||50669<=s&&s<=50695||50697<=s&&s<=50723||50725<=s&&s<=50751||50753<=s&&s<=50779||50781<=s&&s<=50807||50809<=s&&s<=50835||50837<=s&&s<=50863||50865<=s&&s<=50891||50893<=s&&s<=50919||50921<=s&&s<=50947||50949<=s&&s<=50975||50977<=s&&s<=51003||51005<=s&&s<=51031||51033<=s&&s<=51059||51061<=s&&s<=51087||51089<=s&&s<=51115||51117<=s&&s<=51143||51145<=s&&s<=51171||51173<=s&&s<=51199||51201<=s&&s<=51227||51229<=s&&s<=51255||51257<=s&&s<=51283||51285<=s&&s<=51311||51313<=s&&s<=51339||51341<=s&&s<=51367||51369<=s&&s<=51395||51397<=s&&s<=51423||51425<=s&&s<=51451||51453<=s&&s<=51479||51481<=s&&s<=51507||51509<=s&&s<=51535||51537<=s&&s<=51563||51565<=s&&s<=51591||51593<=s&&s<=51619||51621<=s&&s<=51647||51649<=s&&s<=51675||51677<=s&&s<=51703||51705<=s&&s<=51731||51733<=s&&s<=51759||51761<=s&&s<=51787||51789<=s&&s<=51815||51817<=s&&s<=51843||51845<=s&&s<=51871||51873<=s&&s<=51899||51901<=s&&s<=51927||51929<=s&&s<=51955||51957<=s&&s<=51983||51985<=s&&s<=52011||52013<=s&&s<=52039||52041<=s&&s<=52067||52069<=s&&s<=52095||52097<=s&&s<=52123||52125<=s&&s<=52151||52153<=s&&s<=52179||52181<=s&&s<=52207||52209<=s&&s<=52235||52237<=s&&s<=52263||52265<=s&&s<=52291||52293<=s&&s<=52319||52321<=s&&s<=52347||52349<=s&&s<=52375||52377<=s&&s<=52403||52405<=s&&s<=52431||52433<=s&&s<=52459||52461<=s&&s<=52487||52489<=s&&s<=52515||52517<=s&&s<=52543||52545<=s&&s<=52571||52573<=s&&s<=52599||52601<=s&&s<=52627||52629<=s&&s<=52655||52657<=s&&s<=52683||52685<=s&&s<=52711||52713<=s&&s<=52739||52741<=s&&s<=52767||52769<=s&&s<=52795||52797<=s&&s<=52823||52825<=s&&s<=52851||52853<=s&&s<=52879||52881<=s&&s<=52907||52909<=s&&s<=52935||52937<=s&&s<=52963||52965<=s&&s<=52991||52993<=s&&s<=53019||53021<=s&&s<=53047||53049<=s&&s<=53075||53077<=s&&s<=53103||53105<=s&&s<=53131||53133<=s&&s<=53159||53161<=s&&s<=53187||53189<=s&&s<=53215||53217<=s&&s<=53243||53245<=s&&s<=53271||53273<=s&&s<=53299||53301<=s&&s<=53327||53329<=s&&s<=53355||53357<=s&&s<=53383||53385<=s&&s<=53411||53413<=s&&s<=53439||53441<=s&&s<=53467||53469<=s&&s<=53495||53497<=s&&s<=53523||53525<=s&&s<=53551||53553<=s&&s<=53579||53581<=s&&s<=53607||53609<=s&&s<=53635||53637<=s&&s<=53663||53665<=s&&s<=53691||53693<=s&&s<=53719||53721<=s&&s<=53747||53749<=s&&s<=53775||53777<=s&&s<=53803||53805<=s&&s<=53831||53833<=s&&s<=53859||53861<=s&&s<=53887||53889<=s&&s<=53915||53917<=s&&s<=53943||53945<=s&&s<=53971||53973<=s&&s<=53999||54001<=s&&s<=54027||54029<=s&&s<=54055||54057<=s&&s<=54083||54085<=s&&s<=54111||54113<=s&&s<=54139||54141<=s&&s<=54167||54169<=s&&s<=54195||54197<=s&&s<=54223||54225<=s&&s<=54251||54253<=s&&s<=54279||54281<=s&&s<=54307||54309<=s&&s<=54335||54337<=s&&s<=54363||54365<=s&&s<=54391||54393<=s&&s<=54419||54421<=s&&s<=54447||54449<=s&&s<=54475||54477<=s&&s<=54503||54505<=s&&s<=54531||54533<=s&&s<=54559||54561<=s&&s<=54587||54589<=s&&s<=54615||54617<=s&&s<=54643||54645<=s&&s<=54671||54673<=s&&s<=54699||54701<=s&&s<=54727||54729<=s&&s<=54755||54757<=s&&s<=54783||54785<=s&&s<=54811||54813<=s&&s<=54839||54841<=s&&s<=54867||54869<=s&&s<=54895||54897<=s&&s<=54923||54925<=s&&s<=54951||54953<=s&&s<=54979||54981<=s&&s<=55007||55009<=s&&s<=55035||55037<=s&&s<=55063||55065<=s&&s<=55091||55093<=s&&s<=55119||55121<=s&&s<=55147||55149<=s&&s<=55175||55177<=s&&s<=55203?10:9757==s||9977==s||9994<=s&&s<=9997||127877==s||127938<=s&&s<=127940||127943==s||127946<=s&&s<=127948||128066<=s&&s<=128067||128070<=s&&s<=128080||128110==s||128112<=s&&s<=128120||128124==s||128129<=s&&s<=128131||128133<=s&&s<=128135||128170==s||128372<=s&&s<=128373||128378==s||128400==s||128405<=s&&s<=128406||128581<=s&&s<=128583||128587<=s&&s<=128591||128675==s||128692<=s&&s<=128694||128704==s||128716==s||129304<=s&&s<=129308||129310<=s&&s<=129311||129318==s||129328<=s&&s<=129337||129341<=s&&s<=129342||129489<=s&&s<=129501?r:127995<=s&&s<=127999?14:8205==s?15:9792==s||9794==s||9877<=s&&s<=9878||9992==s||10084==s||127752==s||127806==s||127859==s||127891==s||127908==s||127912==s||127979==s||127981==s||128139==s||128187<=s&&s<=128188||128295==s||128300==s||128488==s||128640==s||128658==s?o:128102<=s&&s<=128105?i:11}return this.nextBreak=function(t,e){if(void 0===e&&(e=0),e<0)return 0;if(e>=t.length-1)return t.length;for(var n,r,o=u(s(t,e)),i=[],c=e+1;c<t.length;c++)if(r=c-1,!(55296<=(n=t).charCodeAt(r)&&n.charCodeAt(r)<=56319&&56320<=n.charCodeAt(r+1)&&n.charCodeAt(r+1)<=57343)){var f=u(s(t,c));if(a(o,i,f))return c;i.push(f)}return t.length},this.splitGraphemes=function(t){for(var e,n=[],r=0;(e=this.nextBreak(t,r))<t.length;)n.push(t.slice(r,e)),r=e;return r<t.length&&n.push(t.slice(r)),n},this.iterateGraphemes=function(t){var e=0,n={next:function(){var n,r;return(r=this.nextBreak(t,e))<t.length?(n=t.slice(e,r),e=r,{value:n,done:!1}):e<t.length?(n=t.slice(e),e=t.length,{value:n,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return n}),n},this.countGraphemes=function(t){for(var e,n=0,r=0;(e=this.nextBreak(t,r))<t.length;)r=e,n++;return r<t.length&&n++,n},this})},369:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Collection:()=>S,Iterable:()=>vr,List:()=>Ze,Map:()=>xe,OrderedMap:()=>dn,OrderedSet:()=>tr,Range:()=>zn,Record:()=>ir,Repeat:()=>hr,Seq:()=>K,Set:()=>Cn,Stack:()=>bn,default:()=>mr,fromJS:()=>pr,get:()=>Zt,getIn:()=>Un,has:()=>Xt,hasIn:()=>Fn,hash:()=>lt,is:()=>at,isAssociative:()=>O,isCollection:()=>v,isImmutable:()=>C,isIndexed:()=>w,isKeyed:()=>g,isOrdered:()=>j,isValueObject:()=>st,merge:()=>ye,mergeDeep:()=>ve,mergeDeepWith:()=>me,mergeWith:()=>_e,remove:()=>ee,removeIn:()=>ae,set:()=>ne,setIn:()=>ie,update:()=>ce,updateIn:()=>re,version:()=>_r});var r=32,o=31,i={};function s(t){t&&(t.value=!0)}function a(){}function u(t){return void 0===t.size&&(t.size=t.__iterate(f)),t.size}function c(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?u(t)+e:e}function f(){return!0}function l(t,e,n){return(0===t&&!y(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function h(t,e){return d(t,e,0)}function p(t,e){return d(t,e,e)}function d(t,e,n){return void 0===t?n:y(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function y(t){return t<0||0===t&&1/t==-1/0}var _="@@__IMMUTABLE_ITERABLE__@@";function v(t){return Boolean(t&&t[_])}var m="@@__IMMUTABLE_KEYED__@@";function g(t){return Boolean(t&&t[m])}var b="@@__IMMUTABLE_INDEXED__@@";function w(t){return Boolean(t&&t[b])}function O(t){return g(t)||w(t)}var S=function(t){return v(t)?t:K(t)},E=function(t){function e(t){return g(t)?t:G(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),I=function(t){function e(t){return w(t)?t:V(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S),A=function(t){function e(t){return v(t)&&!O(t)?t:Q(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(S);S.Keyed=E,S.Indexed=I,S.Set=A;var T="@@__IMMUTABLE_SEQ__@@";function k(t){return Boolean(t&&t[T])}var x="@@__IMMUTABLE_RECORD__@@";function M(t){return Boolean(t&&t[x])}function C(t){return v(t)||M(t)}var D="@@__IMMUTABLE_ORDERED__@@";function j(t){return Boolean(t&&t[D])}var R="function"==typeof Symbol&&Symbol.iterator,N=R||"@@iterator",L=function(t){this.next=t};function P(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function z(){return{value:void 0,done:!0}}function U(t){return!!q(t)}function B(t){return t&&"function"==typeof t.next}function F(t){var e=q(t);return e&&e.call(t)}function q(t){var e=t&&(R&&t[R]||t["@@iterator"]);if("function"==typeof e)return e}L.prototype.toString=function(){return"[Iterator]"},L.KEYS=0,L.VALUES=1,L.ENTRIES=2,L.prototype.inspect=L.prototype.toSource=function(){return this.toString()},L.prototype[N]=function(){return this};var W=Object.prototype.hasOwnProperty;function H(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var K=function(t){function e(t){return null==t?Z():C(t)?t.toSeq():function(t){var e=nt(t);if(e)return e;if("object"==typeof t)return new Y(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[e?r-++o:o++];if(!1===t(i[1],i[0],this))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,o=0;return new L((function(){if(o===r)return{value:void 0,done:!0};var i=n[e?r-++o:o++];return P(t,i[0],i[1])}))}return this.__iteratorUncached(t,e)},e}(S),G=function(t){function e(t){return null==t?Z().toKeyedSeq():v(t)?g(t)?t.toSeq():t.fromEntrySeq():M(t)?t.toSeq():tt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(K),V=function(t){function e(t){return null==t?Z():v(t)?g(t)?t.entrySeq():t.toIndexedSeq():M(t)?t.toSeq().entrySeq():et(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(K),Q=function(t){function e(t){return(v(t)&&!O(t)?t:V(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(K);K.isSeq=k,K.Keyed=G,K.Set=Q,K.Indexed=V,K.prototype[T]=!0;var J=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[c(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,o=0;o!==r;){var i=e?r-++o:o++;if(!1===t(n[i],i,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,o=0;return new L((function(){if(o===r)return{value:void 0,done:!0};var i=e?r-++o:o++;return P(t,i,n[i])}))},e}(V),Y=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return W.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var s=r[e?o-++i:i++];if(!1===t(n[s],s,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length,i=0;return new L((function(){if(i===o)return{value:void 0,done:!0};var s=r[e?o-++i:i++];return P(t,s,n[s])}))},e}(G);Y.prototype[D]=!0;var $,X=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=F(this._collection),r=0;if(B(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=F(this._collection);if(!B(n))return new L(z);var r=0;return new L((function(){var e=n.next();return e.done?e:P(t,r++,e.value)}))},e}(V);function Z(){return $||($=new J([]))}function tt(t){var e=Array.isArray(t)?new J(t):U(t)?new X(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new Y(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function et(t){var e=nt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function nt(t){return H(t)?new J(t):U(t)?new X(t):void 0}var rt="@@__IMMUTABLE_MAP__@@";function ot(t){return Boolean(t&&t[rt])}function it(t){return ot(t)&&j(t)}function st(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function at(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(st(t)&&st(e)&&t.equals(e))}var ut="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function ct(t){return t>>>1&1073741824|3221225471&t}var ft=Object.prototype.valueOf;function lt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return ct(e)}(t);case"string":return t.length>gt?(void 0===(n=Ot[e=t])&&(n=ht(e),wt===bt&&(wt=0,Ot={}),wt++,Ot[e]=n),n):ht(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?ct(t.hashCode(t)):(t.valueOf!==ft&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(_t&&void 0!==(e=pt.get(t)))return e;if(void 0!==(e=t[mt]))return e;if(!yt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[mt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++vt,1073741824&vt&&(vt=0),_t)pt.set(t,e);else{if(void 0!==dt&&!1===dt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(yt)Object.defineProperty(t,mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[mt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[mt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return ht(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}var e,n}function ht(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return ct(e)}var pt,dt=Object.isExtensible,yt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),_t="function"==typeof WeakMap;_t&&(pt=new WeakMap);var vt=0,mt="__immutablehash__";"function"==typeof Symbol&&(mt=Symbol(mt));var gt=16,bt=255,wt=0,Ot={},St=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=xt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=kt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e,r){return t(e,r,n)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(G);St.prototype[D]=!0;var Et=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&u(this),this._iter.__iterate((function(o){return t(o,e?n.size-++r:r++,n)}),e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(1,e),o=0;return e&&u(this),new L((function(){var i=r.next();return i.done?i:P(t,e?n.size-++o:o++,i.value,i)}))},e}(V),It=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new L((function(){var e=n.next();return e.done?e:P(t,e.value,e.value,e)}))},e}(Q),At=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){Bt(e);var r=v(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new L((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Bt(r);var o=v(r);return P(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}}))},e}(G);function Tt(t){var e=qt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Wt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new L((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function kt(t,e,n){var r=qt(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var s=t.get(r,i);return s===i?o:e.call(n,s,r,t)},r.__iterateUncached=function(r,o){var i=this;return t.__iterate((function(t,o,s){return!1!==r(e.call(n,t,o,s),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=t.__iterator(2,o);return new L((function(){var o=i.next();if(o.done)return o;var s=o.value,a=s[0];return P(r,a,e.call(n,s[1],a,t),o)}))},r}function xt(t,e){var n=this,r=qt(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Tt(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=Wt,r.__iterate=function(n,r){var o=this,i=0;return r&&u(t),t.__iterate((function(t,s){return n(t,e?s:r?o.size-++i:i++,o)}),!r)},r.__iterator=function(r,o){var i=0;o&&u(t);var s=t.__iterator(2,!o);return new L((function(){var t=s.next();if(t.done)return t;var a=t.value;return P(r,e?a[0]:o?n.size-++i:i++,a[1],t)}))},r}function Mt(t,e,n,r){var o=qt(t);return r&&(o.has=function(r){var o=t.get(r,i);return o!==i&&!!e.call(n,o,r,t)},o.get=function(r,o){var s=t.get(r,i);return s!==i&&e.call(n,s,r,t)?s:o}),o.__iterateUncached=function(o,i){var s=this,a=0;return t.__iterate((function(t,i,u){if(e.call(n,t,i,u))return a++,o(t,r?i:a-1,s)}),i),a},o.__iteratorUncached=function(o,i){var s=t.__iterator(2,i),a=0;return new L((function(){for(;;){var i=s.next();if(i.done)return i;var u=i.value,c=u[0],f=u[1];if(e.call(n,f,c,t))return P(o,r?c:a++,f,i)}}))},o}function Ct(t,e,n,r){var o=t.size;if(l(e,n,o))return t;var i=h(e,o),s=p(n,o);if(i!=i||s!=s)return Ct(t.toSeq().cacheResult(),e,n,r);var a,u=s-i;u==u&&(a=u<0?0:u);var f=qt(t);return f.size=0===a?a:t.size&&a||void 0,!r&&k(t)&&a>=0&&(f.get=function(e,n){return(e=c(this,e))>=0&&e<a?t.get(e+i,n):n}),f.__iterateUncached=function(e,n){var o=this;if(0===a)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,u=!0,c=0;return t.__iterate((function(t,n){if(!u||!(u=s++<i))return c++,!1!==e(t,r?n:c-1,o)&&c!==a})),c},f.__iteratorUncached=function(e,n){if(0!==a&&n)return this.cacheResult().__iterator(e,n);if(0===a)return new L(z);var o=t.__iterator(e,n),s=0,u=0;return new L((function(){for(;s++<i;)o.next();if(++u>a)return{value:void 0,done:!0};var t=o.next();return r||1===e||t.done?t:P(e,u-1,0===e?void 0:t.value[1],t)}))},f}function Dt(t,e,n,r){var o=qt(t);return o.__iterateUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterate(o,i);var a=!0,u=0;return t.__iterate((function(t,i,c){if(!a||!(a=e.call(n,t,i,c)))return u++,o(t,r?i:u-1,s)})),u},o.__iteratorUncached=function(o,i){var s=this;if(i)return this.cacheResult().__iterator(o,i);var a=t.__iterator(2,i),u=!0,c=0;return new L((function(){var t,i,f;do{if((t=a.next()).done)return r||1===o?t:P(o,c++,0===o?void 0:t.value[1],t);var l=t.value;i=l[0],f=l[1],u&&(u=e.call(n,f,i,s))}while(u);return 2===o?t:P(o,i,f,t)}))},o}function jt(t,e){var n=g(t),r=[t].concat(e).map((function(t){return v(t)?n&&(t=E(t)):t=n?tt(t):et(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===r.length)return t;if(1===r.length){var o=r[0];if(o===t||n&&g(o)||w(t)&&w(o))return o}var i=new J(r);return n?i=i.toKeyedSeq():w(t)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=r.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),i}function Rt(t,e,n){var r=qt(t);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var s=0,a=!1;return function t(u,c){u.__iterate((function(i,u){return(!e||c<e)&&v(i)?t(i,c+1):(s++,!1===o(i,n?u:s-1,r)&&(a=!0)),!a}),i)}(t,0),s},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=t.__iterator(r,o),s=[],a=0;return new L((function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(2===r&&(u=u[1]),e&&!(s.length<e)||!v(u))return n?t:P(r,a++,u,t);s.push(i),i=u.__iterator(r,o)}else i=s.pop()}return{value:void 0,done:!0}}))},r}function Nt(t,e,n){e||(e=Ht);var r=g(t),o=0,i=t.toSeq().map((function(e,r){return[r,e,o++,n?n(e,r,t):e]})).valueSeq().toArray();return i.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?G(i):w(t)?V(i):Q(i)}function Lt(t,e,n){if(e||(e=Ht),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return Pt(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return Pt(e,t,n)?n:t}))}function Pt(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function zt(t,e,n,r){var o=qt(t),i=new J(n).map((function(t){return t.size}));return o.size=r?i.max():i.min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=n.map((function(t){return t=S(t),F(o?t.reverse():t)})),s=0,a=!1;return new L((function(){var n;return a||(n=i.map((function(t){return t.next()})),a=r?n.every((function(t){return t.done})):n.some((function(t){return t.done}))),a?{value:void 0,done:!0}:P(t,s++,e.apply(null,n.map((function(t){return t.value}))))}))},o}function Ut(t,e){return t===e?t:k(t)?e:t.constructor(e)}function Bt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ft(t){return g(t)?E:w(t)?I:A}function qt(t){return Object.create((g(t)?G:w(t)?V:Q).prototype)}function Wt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):K.prototype.cacheResult.call(this)}function Ht(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Kt(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function Gt(t,e){if(!t)throw new Error(e)}function Vt(t){Gt(t!==1/0,"Cannot perform this action with an infinite size.")}function Qt(t){if(H(t)&&"string"!=typeof t)return t;if(j(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function Jt(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function Yt(t){return"object"==typeof t&&(C(t)||Array.isArray(t)||Jt(t))}function $t(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Xt(t,e){return C(t)?t.has(e):Yt(t)&&W.call(t,e)}function Zt(t,e,n){return C(t)?t.get(e,n):Xt(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function te(t){if(Array.isArray(t))return Kt(t);var e={};for(var n in t)W.call(t,n)&&(e[n]=t[n]);return e}function ee(t,e){if(!Yt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(C(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!W.call(t,e))return t;var n=te(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function ne(t,e,n){if(!Yt(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(C(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(W.call(t,e)&&n===t[e])return t;var r=te(t);return r[e]=n,r}function re(t,e,n,r){r||(r=n,n=void 0);var o=oe(C(t),t,Qt(e),0,n,r);return o===i?n:o}function oe(t,e,n,r,o,s){var a=e===i;if(r===n.length){var u=a?o:e,c=s(u);return c===u?e:c}if(!a&&!Yt(e))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map($t)+"]: "+e);var f=n[r],l=a?i:Zt(e,f,i),h=oe(l===i?t:C(l),l,n,r+1,o,s);return h===l?e:h===i?ee(e,f):ne(a?t?Fe():{}:e,f,h)}function ie(t,e,n){return re(t,e,i,(function(){return n}))}function se(t,e){return ie(this,t,e)}function ae(t,e){return re(t,e,(function(){return i}))}function ue(t){return ae(this,t)}function ce(t,e,n,r){return re(t,[e],n,r)}function fe(t,e,n){return 1===arguments.length?t(this):ce(this,t,e,n)}function le(t,e,n){return re(this,t,e,n)}function he(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return de(this,t)}function pe(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return de(this,e,t)}function de(t,e,n){for(var r=[],o=0;o<e.length;o++){var s=E(e[o]);0!==s.size&&r.push(s)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations((function(t){for(var e=n?function(e,r){ce(t,r,i,(function(t){return t===i?e:n(t,e,r)}))}:function(e,n){t.set(n,e)},o=0;o<r.length;o++)r[o].forEach(e)})):t.constructor(r[0])}function ye(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return be(t,e)}function _e(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return be(e,n,t)}function ve(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return ge(t,e)}function me(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return ge(e,n,t)}function ge(t,e,n){return be(t,e,function(t){return function e(n,r,o){return Yt(n)&&Yt(r)?be(n,[r],e):t?t(n,r,o):r}}(n))}function be(t,e,n){if(!Yt(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(C(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),o=t,i=r?I:E,s=r?function(e){o===t&&(o=te(o)),o.push(e)}:function(e,r){var i=W.call(o,r),s=i&&n?n(o[r],e,r):e;i&&s===o[r]||(o===t&&(o=te(o)),o[r]=s)},a=0;a<e.length;a++)i(e[a]).forEach(s);return o}function we(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ge(this,t)}function Oe(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return ge(this,e,t)}function Se(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return re(this,t,Fe(),(function(t){return be(t,e)}))}function Ee(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return re(this,t,Fe(),(function(t){return ge(t,e)}))}function Ie(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Ae(){return this.__ownerID?this:this.__ensureOwner(new a)}function Te(){return this.__ensureOwner()}function ke(){return this.__altered}Et.prototype.cacheResult=St.prototype.cacheResult=It.prototype.cacheResult=At.prototype.cacheResult=Wt;var xe=function(t){function e(e){return null==e?Fe():ot(e)&&!j(e)?e:Fe().withMutations((function(n){var r=t(e);Vt(r.size),r.forEach((function(t,e){return n.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Fe().withMutations((function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return qe(this,t,e)},e.prototype.remove=function(t){return qe(this,t,i)},e.prototype.deleteAll=function(t){var e=S(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Fe()},e.prototype.sort=function(t){return dn(Nt(this,t))},e.prototype.sortBy=function(t,e){return dn(Nt(this,e,t))},e.prototype.map=function(t,e){return this.withMutations((function(n){n.forEach((function(r,o){n.set(o,t.call(e,r,o,n))}))}))},e.prototype.__iterator=function(t,e){return new Pe(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Be(this.size,this._root,t,this.__hash):0===this.size?Fe():(this.__ownerID=t,this.__altered=!1,this)},e}(E);xe.isMap=ot;var Me=xe.prototype;Me[rt]=!0,Me.delete=Me.remove,Me.removeAll=Me.deleteAll,Me.setIn=se,Me.removeIn=Me.deleteIn=ue,Me.update=fe,Me.updateIn=le,Me.merge=Me.concat=he,Me.mergeWith=pe,Me.mergeDeep=we,Me.mergeDeepWith=Oe,Me.mergeIn=Se,Me.mergeDeepIn=Ee,Me.withMutations=Ie,Me.wasAltered=ke,Me.asImmutable=Te,Me["@@transducer/init"]=Me.asMutable=Ae,Me["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Me["@@transducer/result"]=function(t){return t.asImmutable()};var Ce=function(t,e){this.ownerID=t,this.entries=e};Ce.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(at(n,o[i][0]))return o[i][1];return r},Ce.prototype.update=function(t,e,n,r,o,u,c){for(var f=o===i,l=this.entries,h=0,p=l.length;h<p&&!at(r,l[h][0]);h++);var d=h<p;if(d?l[h][1]===o:f)return this;if(s(c),(f||!d)&&s(u),!f||1!==l.length){if(!d&&!f&&l.length>=Qe)return function(t,e,n,r){t||(t=new a);for(var o=new Ne(t,lt(n),[n,r]),i=0;i<e.length;i++){var s=e[i];o=o.update(t,0,void 0,s[0],s[1])}return o}(t,l,r,o);var y=t&&t===this.ownerID,_=y?l:Kt(l);return d?f?h===p-1?_.pop():_[h]=_.pop():_[h]=[r,o]:_.push([r,o]),y?(this.entries=_,this):new Ce(t,_)}};var De=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};De.prototype.get=function(t,e,n,r){void 0===e&&(e=lt(n));var i=1<<((0===t?e:e>>>t)&o),s=this.bitmap;return 0==(s&i)?r:this.nodes[Ge(s&i-1)].get(t+5,e,n,r)},De.prototype.update=function(t,e,n,s,a,u,c){void 0===n&&(n=lt(s));var f=(0===e?n:n>>>e)&o,l=1<<f,h=this.bitmap,p=0!=(h&l);if(!p&&a===i)return this;var d=Ge(h&l-1),y=this.nodes,_=p?y[d]:void 0,v=We(_,t,e+5,n,s,a,u,c);if(v===_)return this;if(!p&&v&&y.length>=Je)return function(t,e,n,o,i){for(var s=0,a=new Array(r),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[s++]:void 0;return a[o]=i,new je(t,s+1,a)}(t,y,h,f,v);if(p&&!v&&2===y.length&&He(y[1^d]))return y[1^d];if(p&&v&&1===y.length&&He(v))return v;var m=t&&t===this.ownerID,g=p?v?h:h^l:h|l,b=p?v?Ve(y,d,v,m):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,s=0;s<r;s++)s===e&&(i=1),o[s]=t[s+i];return o}(y,d,m):function(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),s=0,a=0;a<o;a++)a===e?(i[a]=n,s=-1):i[a]=t[a+s];return i}(y,d,v,m);return m?(this.bitmap=g,this.nodes=b,this):new De(t,g,b)};var je=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};je.prototype.get=function(t,e,n,r){void 0===e&&(e=lt(n));var i=(0===t?e:e>>>t)&o,s=this.nodes[i];return s?s.get(t+5,e,n,r):r},je.prototype.update=function(t,e,n,r,s,a,u){void 0===n&&(n=lt(r));var c=(0===e?n:n>>>e)&o,f=s===i,l=this.nodes,h=l[c];if(f&&!h)return this;var p=We(h,t,e+5,n,r,s,a,u);if(p===h)return this;var d=this.count;if(h){if(!p&&--d<Ye)return function(t,e,n,r){for(var o=0,i=0,s=new Array(n),a=0,u=1,c=e.length;a<c;a++,u<<=1){var f=e[a];void 0!==f&&a!==r&&(o|=u,s[i++]=f)}return new De(t,o,s)}(t,l,d,c)}else d++;var y=t&&t===this.ownerID,_=Ve(l,c,p,y);return y?(this.count=d,this.nodes=_,this):new je(t,d,_)};var Re=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};Re.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,s=o.length;i<s;i++)if(at(n,o[i][0]))return o[i][1];return r},Re.prototype.update=function(t,e,n,r,o,a,u){void 0===n&&(n=lt(r));var c=o===i;if(n!==this.keyHash)return c?this:(s(u),s(a),Ke(this,t,e,n,[r,o]));for(var f=this.entries,l=0,h=f.length;l<h&&!at(r,f[l][0]);l++);var p=l<h;if(p?f[l][1]===o:c)return this;if(s(u),(c||!p)&&s(a),c&&2===h)return new Ne(t,this.keyHash,f[1^l]);var d=t&&t===this.ownerID,y=d?f:Kt(f);return p?c?l===h-1?y.pop():y[l]=y.pop():y[l]=[r,o]:y.push([r,o]),d?(this.entries=y,this):new Re(t,this.keyHash,y)};var Ne=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};Ne.prototype.get=function(t,e,n,r){return at(n,this.entry[0])?this.entry[1]:r},Ne.prototype.update=function(t,e,n,r,o,a,u){var c=o===i,f=at(r,this.entry[0]);return(f?o===this.entry[1]:c)?this:(s(u),c?void s(a):f?t&&t===this.ownerID?(this.entry[1]=o,this):new Ne(t,this.keyHash,[r,o]):(s(a),Ke(this,t,e,lt(r),[r,o])))},Ce.prototype.iterate=Re.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},De.prototype.iterate=je.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},Ne.prototype.iterate=function(t,e){return t(this.entry)};var Le,Pe=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Ue(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,o=void 0;if(n.entry){if(0===r)return ze(t,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return ze(t,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return ze(t,i.entry);e=this._stack=Ue(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(L);function ze(t,e){return P(t,e[0],e[1])}function Ue(t,e){return{node:t,index:0,__prev:e}}function Be(t,e,n,r){var o=Object.create(Me);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Fe(){return Le||(Le=Be(0))}function qe(t,e,n){var r,o;if(t._root){var s={value:!1},a={value:!1};if(r=We(t._root,t.__ownerID,0,void 0,e,n,s,a),!a.value)return t;o=t.size+(s.value?n===i?-1:1:0)}else{if(n===i)return t;o=1,r=new Ce(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Be(o,r):Fe()}function We(t,e,n,r,o,a,u,c){return t?t.update(e,n,r,o,a,u,c):a===i?t:(s(c),s(u),new Ne(e,r,[o,a]))}function He(t){return t.constructor===Ne||t.constructor===Re}function Ke(t,e,n,r,i){if(t.keyHash===r)return new Re(e,r,[t.entry,i]);var s,a=(0===n?t.keyHash:t.keyHash>>>n)&o,u=(0===n?r:r>>>n)&o,c=a===u?[Ke(t,e,n+5,r,i)]:(s=new Ne(e,r,i),a<u?[t,s]:[s,t]);return new De(e,1<<a|1<<u,c)}function Ge(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ve(t,e,n,r){var o=r?t:Kt(t);return o[e]=n,o}var Qe=8,Je=16,Ye=8,$e="@@__IMMUTABLE_LIST__@@";function Xe(t){return Boolean(t&&t[$e])}var Ze=function(t){function e(e){var n=an();if(null==e)return n;if(Xe(e))return e;var o=t(e),i=o.size;return 0===i?n:(Vt(i),i>0&&i<r?sn(0,i,5,null,new en(o.toArray())):n.withMutations((function(t){t.setSize(i),o.forEach((function(e,n){return t.set(n,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=c(this,t))>=0&&t<this.size){var n=fn(this,t+=this._origin);return n&&n.array[t&o]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=c(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ln(t,e).set(0,n):ln(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,o=t._root,i={value:!1};return e>=hn(t._capacity)?r=un(r,t.__ownerID,0,e,n,i):o=un(o,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):sn(t._origin,t._capacity,t._level,o,r):t}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):an()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){ln(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},e.prototype.pop=function(){return ln(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ln(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},e.prototype.shift=function(){return ln(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var o=e[r],i=t("string"!=typeof o&&U(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations((function(t){n.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(n[0])},e.prototype.setSize=function(t){return ln(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations((function(r){for(var o=0;o<n.size;o++)r.set(o,t.call(e,r.get(o),o,r))}))},e.prototype.slice=function(t,e){var n=this.size;return l(t,e,n)?this:ln(this,h(t,n),p(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=on(this,e);return new L((function(){var o=r();return o===rn?{value:void 0,done:!0}:P(t,e?--n:n++,o)}))},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,o=on(this,e);(n=o())!==rn&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sn(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?an():(this.__ownerID=t,this.__altered=!1,this)},e}(I);Ze.isList=Xe;var tn=Ze.prototype;tn[$e]=!0,tn.delete=tn.remove,tn.merge=tn.concat,tn.setIn=se,tn.deleteIn=tn.removeIn=ue,tn.update=fe,tn.updateIn=le,tn.mergeIn=Se,tn.mergeDeepIn=Ee,tn.withMutations=Ie,tn.wasAltered=ke,tn.asImmutable=Te,tn["@@transducer/init"]=tn.asMutable=Ae,tn["@@transducer/step"]=function(t,e){return t.push(e)},tn["@@transducer/result"]=function(t){return t.asImmutable()};var en=function(t,e){this.array=t,this.ownerID=e};en.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&o;if(r>=this.array.length)return new en([],t);var i,s=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-5,n))===a&&s)return this}if(s&&!i)return this;var u=cn(this,t);if(!s)for(var c=0;c<r;c++)u.array[c]=void 0;return i&&(u.array[r]=i),u},en.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&o;if(i>=this.array.length)return this;if(e>0){var s=this.array[i];if((r=s&&s.removeAfter(t,e-5,n))===s&&i===this.array.length-1)return this}var a=cn(this,t);return a.array.splice(i+1),r&&(a.array[i]=r),a};var nn,rn={};function on(t,e){var n=t._origin,o=t._capacity,i=hn(o),s=t._tail;return function t(a,u,c){return 0===u?function(t,a){var u=a===i?s&&s.array:t&&t.array,c=a>n?0:n-a,f=o-a;return f>r&&(f=r),function(){if(c===f)return rn;var t=e?--f:c++;return u&&u[t]}}(a,c):function(i,s,a){var u,c=i&&i.array,f=a>n?0:n-a>>s,l=1+(o-a>>s);return l>r&&(l=r),function(){for(;;){if(u){var n=u();if(n!==rn)return n;u=null}if(f===l)return rn;var r=e?--l:f++;u=t(c&&c[r],s-5,a+(r<<s))}}}(a,u,c)}(t._root,t._level,0)}function sn(t,e,n,r,o,i,s){var a=Object.create(tn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=o,a.__ownerID=i,a.__hash=s,a.__altered=!1,a}function an(){return nn||(nn=sn(0,0,5))}function un(t,e,n,r,i,a){var u,c=r>>>n&o,f=t&&c<t.array.length;if(!f&&void 0===i)return t;if(n>0){var l=t&&t.array[c],h=un(l,e,n-5,r,i,a);return h===l?t:((u=cn(t,e)).array[c]=h,u)}return f&&t.array[c]===i?t:(a&&s(a),u=cn(t,e),void 0===i&&c===u.array.length-1?u.array.pop():u.array[c]=i,u)}function cn(t,e){return e&&t&&e===t.ownerID?t:new en(t?t.array.slice():[],e)}function fn(t,e){if(e>=hn(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&o],r-=5;return n}}function ln(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new a,i=t._origin,s=t._capacity,u=i+e,c=void 0===n?s:n<0?s+n:i+n;if(u===i&&c===s)return t;if(u>=c)return t.clear();for(var f=t._level,l=t._root,h=0;u+h<0;)l=new en(l&&l.array.length?[void 0,l]:[],r),h+=1<<(f+=5);h&&(u+=h,i+=h,c+=h,s+=h);for(var p=hn(s),d=hn(c);d>=1<<f+5;)l=new en(l&&l.array.length?[l]:[],r),f+=5;var y=t._tail,_=d<p?fn(t,c-1):d>p?new en([],r):y;if(y&&d>p&&u<s&&y.array.length){for(var v=l=cn(l,r),m=f;m>5;m-=5){var g=p>>>m&o;v=v.array[g]=cn(v.array[g],r)}v.array[p>>>5&o]=y}if(c<s&&(_=_&&_.removeAfter(r,0,c)),u>=d)u-=d,c-=d,f=5,l=null,_=_&&_.removeBefore(r,0,u);else if(u>i||d<p){for(h=0;l;){var b=u>>>f&o;if(b!==d>>>f&o)break;b&&(h+=(1<<f)*b),f-=5,l=l.array[b]}l&&u>i&&(l=l.removeBefore(r,f,u-h)),l&&d<p&&(l=l.removeAfter(r,f,d-h)),h&&(u-=h,c-=h)}return t.__ownerID?(t.size=c-u,t._origin=u,t._capacity=c,t._level=f,t._root=l,t._tail=_,t.__hash=void 0,t.__altered=!0,t):sn(u,c,f,l,_)}function hn(t){return t<r?0:t-1>>>5<<5}var pn,dn=function(t){function e(t){return null==t?_n():it(t)?t:_n().withMutations((function(e){var n=E(t);Vt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):_n()},e.prototype.set=function(t,e){return vn(this,t,e)},e.prototype.remove=function(t){return vn(this,t,i)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?yn(e,n,t,this.__hash):0===this.size?_n():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(xe);function yn(t,e,n,r){var o=Object.create(dn.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function _n(){return pn||(pn=yn(Fe(),an()))}function vn(t,e,n){var o,s,a=t._map,u=t._list,c=a.get(e),f=void 0!==c;if(n===i){if(!f)return t;u.size>=r&&u.size>=2*a.size?(o=(s=u.filter((function(t,e){return void 0!==t&&c!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(o.__ownerID=s.__ownerID=t.__ownerID)):(o=a.remove(e),s=c===u.size-1?u.pop():u.set(c,void 0))}else if(f){if(n===u.get(c)[1])return t;o=a,s=u.set(c,[e,n])}else o=a.set(e,u.size),s=u.set(u.size,[e,n]);return t.__ownerID?(t.size=o.size,t._map=o,t._list=s,t.__hash=void 0,t):yn(o,s)}dn.isOrderedMap=it,dn.prototype[D]=!0,dn.prototype.delete=dn.prototype.remove;var mn="@@__IMMUTABLE_STACK__@@";function gn(t){return Boolean(t&&t[mn])}var bn=function(t){function e(t){return null==t?En():gn(t)?t:En().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=c(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Sn(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&gn(e))return e;Vt(e.size);var n=this.size,r=this._head;return e.__iterate((function(t){n++,r={value:t,next:r}}),!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Sn(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):En()},e.prototype.slice=function(e,n){if(l(e,n,this.size))return this;var r=h(e,this.size);if(p(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Sn(o,i)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Sn(this.size,this._head,t,this.__hash):0===this.size?En():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new J(this.toArray()).__iterate((function(e,r){return t(e,r,n)}),e);for(var r=0,o=this._head;o&&!1!==t(o.value,r++,this);)o=o.next;return r},e.prototype.__iterator=function(t,e){if(e)return new J(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new L((function(){if(r){var e=r.value;return r=r.next,P(t,n++,e)}return{value:void 0,done:!0}}))},e}(I);bn.isStack=gn;var wn,On=bn.prototype;function Sn(t,e,n,r){var o=Object.create(On);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function En(){return wn||(wn=Sn(0))}On[mn]=!0,On.shift=On.pop,On.unshift=On.push,On.unshiftAll=On.pushAll,On.withMutations=Ie,On.wasAltered=ke,On.asImmutable=Te,On["@@transducer/init"]=On.asMutable=Ae,On["@@transducer/step"]=function(t,e){return t.unshift(e)},On["@@transducer/result"]=function(t){return t.asImmutable()};var In="@@__IMMUTABLE_SET__@@";function An(t){return Boolean(t&&t[In])}function Tn(t){return An(t)&&j(t)}function kn(t,e){if(t===e)return!0;if(!v(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||g(t)!==g(e)||w(t)!==w(e)||j(t)!==j(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!O(t);if(j(t)){var r=t.entries();return e.every((function(t,e){var o=r.next().value;return o&&at(o[1],t)&&(n||at(o[0],e))}))&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var s=t;t=e,e=s}var a=!0,u=e.__iterate((function(e,r){if(n?!t.has(e):o?!at(e,t.get(r,i)):!at(t.get(r,i),e))return a=!1,!1}));return a&&t.size===u}function xn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Mn(t){if(!t||"object"!=typeof t)return t;if(!v(t)){if(!Yt(t))return t;t=K(t)}if(g(t)){var e={};return t.__iterate((function(t,n){e[n]=Mn(t)})),e}var n=[];return t.__iterate((function(t){n.push(Mn(t))})),n}var Cn=function(t){function e(e){return null==e?Ln():An(e)&&!j(e)?e:Ln().withMutations((function(n){var r=t(e);Vt(r.size),r.forEach((function(t){return n.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.intersect=function(t){return(t=S(t).toArray()).length?jn.intersect.apply(e(t.pop()),t):Ln()},e.union=function(t){return(t=S(t).toArray()).length?jn.union.apply(e(t.pop()),t):Ln()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Rn(this,this._map.set(t,t))},e.prototype.remove=function(t){return Rn(this,this._map.remove(t))},e.prototype.clear=function(){return Rn(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],o=[];return this.forEach((function(i){var s=t.call(e,i,i,n);s!==i&&(r.push(i),o.push(s))})),this.withMutations((function(t){r.forEach((function(e){return t.remove(e)})),o.forEach((function(e){return t.add(e)}))}))},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach((function(t){return n.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var r=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&r.push(t)})),this.withMutations((function(t){r.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return tr(Nt(this,t))},e.prototype.sortBy=function(t,e){return tr(Nt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e){return t(e,e,n)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(A);Cn.isSet=An;var Dn,jn=Cn.prototype;function Rn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Nn(t,e){var n=Object.create(jn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ln(){return Dn||(Dn=Nn(Fe()))}jn[In]=!0,jn.delete=jn.remove,jn.merge=jn.concat=jn.union,jn.withMutations=Ie,jn.asImmutable=Te,jn["@@transducer/init"]=jn.asMutable=Ae,jn["@@transducer/step"]=function(t,e){return t.add(e)},jn["@@transducer/result"]=function(t){return t.asImmutable()},jn.__empty=Ln,jn.__make=Nn;var Pn,zn=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(Gt(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(Pn)return Pn;Pn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+c(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return l(t,n,this.size)?this:(t=h(t,this.size),(n=p(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==t(o,e?n-++i:i++,this);)o+=e?-r:r;return i},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;return new L((function(){if(i===n)return{value:void 0,done:!0};var s=o;return o+=e?-r:r,P(t,e?n-++i:i++,s)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:kn(this,t)},e}(V);function Un(t,e,n){for(var r=Qt(e),o=0;o!==r.length;)if((t=Zt(t,r[o++],i))===i)return n;return t}function Bn(t,e){return Un(this,t,e)}function Fn(t,e){return Un(t,e,i)!==i}function qn(){Vt(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t}S.isIterable=v,S.isKeyed=g,S.isIndexed=w,S.isAssociative=O,S.isOrdered=j,S.Iterator=L,xn(S,{toArray:function(){Vt(this.size);var t=new Array(this.size||0),e=g(this),n=0;return this.__iterate((function(r,o){t[n++]=e?[o,r]:r})),t},toIndexedSeq:function(){return new Et(this)},toJS:function(){return Mn(this)},toKeyedSeq:function(){return new St(this,!0)},toMap:function(){return xe(this.toKeyedSeq())},toObject:qn,toOrderedMap:function(){return dn(this.toKeyedSeq())},toOrderedSet:function(){return tr(g(this)?this.valueSeq():this)},toSet:function(){return Cn(g(this)?this.valueSeq():this)},toSetSeq:function(){return new It(this)},toSeq:function(){return w(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return bn(g(this)?this.valueSeq():this)},toList:function(){return Ze(g(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ut(this,jt(this,t))},includes:function(t){return this.some((function(e){return at(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Vt(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1})),n},filter:function(t,e){return Ut(this,Mt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Vt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Vt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Ut(this,kt(this,t,e))},reduce:function(t,e,n){return Gn(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return Gn(this,t,e,n,arguments.length<2,!0)},reverse:function(){return Ut(this,xt(this,!0))},slice:function(t,e){return Ut(this,Ct(this,t,e,!0))},some:function(t,e){return!this.every(Jn(t),e)},sort:function(t){return Ut(this,Nt(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return u(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=xe().asMutable();return t.__iterate((function(o,i){r.update(e.call(n,o,i,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return kn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new J(t._cache);var e=t.toSeq().map(Qn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Jn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(f,null,t)},flatMap:function(t,e){return Ut(this,function(t,e,n){var r=Ft(t);return t.toSeq().map((function(o,i){return r(e.call(n,o,i,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Ut(this,Rt(this,t,!0))},fromEntrySeq:function(){return new At(this)},get:function(t,e){return this.find((function(e,n){return at(n,t)}),void 0,e)},getIn:Bn,groupBy:function(t,e){return function(t,e,n){var r=g(t),o=(j(t)?dn():xe()).asMutable();t.__iterate((function(i,s){o.update(e.call(n,i,s,t),(function(t){return(t=t||[]).push(r?[s,i]:i),t}))}));var i=Ft(t);return o.map((function(e){return Ut(t,i(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,i)!==i},hasIn:function(t){return Fn(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:S(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:S(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return at(e,t)}))},keySeq:function(){return this.toSeq().map(Vn).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Lt(this,t)},maxBy:function(t,e){return Lt(this,e,t)},min:function(t){return Lt(this,t?Yn(t):Xn)},minBy:function(t,e){return Lt(this,e?Yn(e):Xn,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Ut(this,Dt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Jn(t),e)},sortBy:function(t,e){return Ut(this,Nt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Ut(this,function(t,e,n){var r=qt(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var s=0;return t.__iterate((function(t,o,a){return e.call(n,t,o,a)&&++s&&r(t,o,i)})),s},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var s=t.__iterator(2,o),a=!0;return new L((function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var o=t.value,u=o[0],c=o[1];return e.call(n,c,u,i)?2===r?t:P(r,u,c,t):(a=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Jn(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=j(t),n=g(t),r=e?1:0;return function(t,e){return e=ut(e,3432918353),e=ut(e<<15|e>>>-15,461845907),e=ut(e<<13|e>>>-13,5),e=ut((e=(e+3864292196|0)^t)^e>>>16,2246822507),ct((e=ut(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Zn(lt(t),lt(e))|0}:function(t,e){r=r+Zn(lt(t),lt(e))|0}:e?function(t){r=31*r+lt(t)|0}:function(t){r=r+lt(t)|0}),r)}(this))}});var Wn=S.prototype;Wn[_]=!0,Wn[N]=Wn.values,Wn.toJSON=Wn.toArray,Wn.__toStringMapper=$t,Wn.inspect=Wn.toSource=function(){return this.toString()},Wn.chain=Wn.flatMap,Wn.contains=Wn.includes,xn(E,{flip:function(){return Ut(this,Tt(this))},mapEntries:function(t,e){var n=this,r=0;return Ut(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Ut(this,this.toSeq().flip().map((function(r,o){return t.call(e,r,o,n)})).flip())}});var Hn=E.prototype;Hn[m]=!0,Hn[N]=Wn.entries,Hn.toJSON=qn,Hn.__toStringMapper=function(t,e){return $t(e)+": "+$t(t)},xn(I,{toKeyedSeq:function(){return new St(this,!1)},filter:function(t,e){return Ut(this,Mt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ut(this,xt(this,!1))},slice:function(t,e){return Ut(this,Ct(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=h(t,t<0?this.count():this.size);var r=this.slice(0,t);return Ut(this,1===n?r:r.concat(Kt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Ut(this,Rt(this,t,!1))},get:function(t,e){return(t=c(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=c(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ut(this,function(t,e){var n=qt(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate((function(t){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(1,r),s=0;return new L((function(){return(!o||s%2)&&(o=i.next()).done?o:s%2?P(n,s++,e):P(n,s++,o.value,o)}))},n}(this,t))},interleave:function(){var t=[this].concat(Kt(arguments)),e=zt(this.toSeq(),V.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Ut(this,n)},keySeq:function(){return zn(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Ut(this,Dt(this,t,e,!1))},zip:function(){var t=[this].concat(Kt(arguments));return Ut(this,zt(this,$n,t))},zipAll:function(){var t=[this].concat(Kt(arguments));return Ut(this,zt(this,$n,t,!0))},zipWith:function(t){var e=Kt(arguments);return e[0]=this,Ut(this,zt(this,t,e))}});var Kn=I.prototype;function Gn(t,e,n,r,o,i){return Vt(t.size),t.__iterate((function(t,i,s){o?(o=!1,n=t):n=e.call(r,n,t,i,s)}),i),n}function Vn(t,e){return e}function Qn(t,e){return[e,t]}function Jn(t){return function(){return!t.apply(this,arguments)}}function Yn(t){return function(){return-t.apply(this,arguments)}}function $n(){return Kt(arguments)}function Xn(t,e){return t<e?1:t>e?-1:0}function Zn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}Kn[b]=!0,Kn[D]=!0,xn(A,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),A.prototype.has=Wn.includes,A.prototype.contains=A.prototype.includes,xn(G,E.prototype),xn(V,I.prototype),xn(Q,A.prototype);var tr=function(t){function e(t){return null==t?or():Tn(t)?t:or().withMutations((function(e){var n=A(t);Vt(n.size),n.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(E(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Cn);tr.isOrderedSet=Tn;var er,nr=tr.prototype;function rr(t,e){var n=Object.create(nr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function or(){return er||(er=rr(_n()))}nr[D]=!0,nr.zip=Kn.zip,nr.zipWith=Kn.zipWith,nr.__empty=or,nr.__make=rr;var ir=function(t,e){var n,r=function(i){var s=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(t),u=o._indices={};o._name=e,o._keys=a,o._defaultValues=t;for(var c=0;c<a.length;c++){var f=a[c];u[f]=c,o[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+ur(this)+' with property "'+f+'" since that property name is part of the Record API.'):fr(o,f)}}this.__ownerID=void 0,this._values=Ze().withMutations((function(t){t.setSize(s._keys.length),E(i).forEach((function(e,n){t.set(s._indices[n],e===s._defaultValues[n]?void 0:e)}))}))},o=r.prototype=Object.create(sr);return o.constructor=r,e&&(r.displayName=e),r};ir.prototype.toString=function(){for(var t,e=ur(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)e+=(r?", ":"")+(t=n[r])+": "+$t(this.get(t));return e+" }"},ir.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&cr(this).equals(cr(t))},ir.prototype.hashCode=function(){return cr(this).hashCode()},ir.prototype.has=function(t){return this._indices.hasOwnProperty(t)},ir.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},ir.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return ar(this,n)}return this},ir.prototype.remove=function(t){return this.set(t)},ir.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ar(this,t)},ir.prototype.wasAltered=function(){return this._values.wasAltered()},ir.prototype.toSeq=function(){return cr(this)},ir.prototype.toJS=function(){return Mn(this)},ir.prototype.entries=function(){return this.__iterator(2)},ir.prototype.__iterator=function(t,e){return cr(this).__iterator(t,e)},ir.prototype.__iterate=function(t,e){return cr(this).__iterate(t,e)},ir.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?ar(this,e,t):(this.__ownerID=t,this._values=e,this)},ir.isRecord=M,ir.getDescriptiveName=ur;var sr=ir.prototype;function ar(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function ur(t){return t.constructor.displayName||t.constructor.name||"Record"}function cr(t){return tt(t._keys.map((function(e){return[e,t.get(e)]})))}function fr(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Gt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}sr[x]=!0,sr.delete=sr.remove,sr.deleteIn=sr.removeIn=ue,sr.getIn=Bn,sr.hasIn=Wn.hasIn,sr.merge=he,sr.mergeWith=pe,sr.mergeIn=Se,sr.mergeDeep=we,sr.mergeDeepWith=Oe,sr.mergeDeepIn=Ee,sr.setIn=se,sr.update=fe,sr.updateIn=le,sr.withMutations=Ie,sr.asMutable=Ae,sr.asImmutable=Te,sr[N]=sr.entries,sr.toJSON=sr.toObject=Wn.toObject,sr.inspect=sr.toSource=function(){return this.toString()};var lr,hr=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,this.size=void 0===n?1/0:Math.max(0,n),0===this.size){if(lr)return lr;lr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return at(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return l(t,n,r)?this:new e(this._value,p(n,r)-h(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return at(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return at(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this.size,r=0;r!==n&&!1!==t(this._value,e?n-++r:r++,this););return r},e.prototype.__iterator=function(t,e){var n=this,r=this.size,o=0;return new L((function(){return o===r?{value:void 0,done:!0}:P(t,e?r-++o:o++,n._value)}))},e.prototype.equals=function(t){return t instanceof e?at(this._value,t._value):kn(t)},e}(V);function pr(t,e){return dr([],e||yr,t,"",e&&e.length>2?[]:void 0,{"":t})}function dr(t,e,n,r,o,i){var s=Array.isArray(n)?V:Jt(n)?G:null;if(s){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),o&&""!==r&&o.push(r);var a=e.call(i,r,s(n).map((function(r,i){return dr(t,e,r,i,o,n)})),o&&o.slice());return t.pop(),o&&o.pop(),a}return n}function yr(t,e){return g(e)?e.toMap():e.toList()}var _r="4.0.0-rc.11",vr=S;const mr={version:_r,Collection:S,Iterable:S,Seq:K,Map:xe,OrderedMap:dn,List:Ze,Stack:bn,Set:Cn,OrderedSet:tr,Record:ir,Range:zn,Repeat:hr,is:at,fromJS:pr,hash:lt,isImmutable:C,isCollection:v,isKeyed:g,isIndexed:w,isAssociative:O,isOrdered:j,isValueObject:st,isSeq:k,isList:Xe,isMap:ot,isOrderedMap:it,isStack:gn,isSet:An,isOrderedSet:Tn,isRecord:M,get:Zt,getIn:Un,has:Xt,hasIn:Fn,merge:ye,mergeDeep:ve,mergeWith:_e,mergeDeepWith:me,remove:ee,removeIn:ae,set:ne,setIn:ie,update:ce,updateIn:re}},96:(t,e,n)=>{var r="Expected a function",o=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,l=c||f||Function("return this")(),h=Object.prototype.toString,p=Math.max,d=Math.min,y=function(){return l.Date.now()};function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==h.call(t)}(t))return NaN;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||a.test(t)?u(t.slice(2),n?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw new TypeError(r);return _(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),function(t,e,n){var o,i,s,a,u,c,f=0,l=!1,h=!1,m=!0;if("function"!=typeof t)throw new TypeError(r);function g(e){var n=o,r=i;return o=i=void 0,f=e,a=t.apply(r,n)}function b(t){return f=t,u=setTimeout(O,e),l?g(t):a}function w(t){var n=t-c;return void 0===c||n>=e||n<0||h&&t-f>=s}function O(){var t=y();if(w(t))return S(t);u=setTimeout(O,function(t){var n=e-(t-c);return h?d(n,s-(t-f)):n}(t))}function S(t){return u=void 0,m&&o?g(t):(o=i=void 0,a)}function E(){var t=y(),n=w(t);if(o=arguments,i=this,c=t,n){if(void 0===u)return b(c);if(h)return u=setTimeout(O,e),g(c)}return void 0===u&&(u=setTimeout(O,e)),a}return e=v(e)||0,_(n)&&(l=!!n.leading,s=(h="maxWait"in n)?p(v(n.maxWait)||0,e):s,m="trailing"in n?!!n.trailing:m),E.cancel=function(){void 0!==u&&clearTimeout(u),f=0,o=c=i=u=void 0},E.flush=function(){return void 0===u?a:S(y())},E}(t,e,{leading:o,maxWait:e,trailing:i})}},655:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__assign:()=>i,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>O,__await:()=>g,__awaiter:()=>f,__classPrivateFieldGet:()=>T,__classPrivateFieldIn:()=>x,__classPrivateFieldSet:()=>k,__createBinding:()=>h,__decorate:()=>a,__exportStar:()=>p,__extends:()=>o,__generator:()=>l,__importDefault:()=>A,__importStar:()=>I,__makeTemplateObject:()=>S,__metadata:()=>c,__param:()=>u,__read:()=>y,__rest:()=>s,__spread:()=>_,__spreadArray:()=>m,__spreadArrays:()=>v,__values:()=>d});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function a(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function a(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var h=Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function p(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||h(e,t,n)}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function _(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function m(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):f(i[0][2],n)}catch(t){f(i[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function f(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:o?o(e):e}:o}}function O(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,o,(e=t[n](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function I(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&h(e,t,n);return E(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function T(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function k(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n}function x(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}},469:(t,e,n)=>{var r;t=n.nmd(t),function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||this||{},i=o._,s=Array.prototype,a=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=s.push,f=s.slice,l=a.toString,h=a.hasOwnProperty,p=Array.isArray,d=Object.keys,y=Object.create,_=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};e.nodeType?o._=v:(!t.nodeType&&t.exports&&(e=t.exports=v),e._=v),v.VERSION="1.9.1";var m,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return v.iteratee!==m?v.iteratee(t,e):null==t?v.identity:v.isFunction(t)?g(t,e,n):v.isObject(t)&&!v.isArray(t)?v.matcher(t):v.property(t)};v.iteratee=m=function(t,e){return b(t,e,1/0)};var w=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(e+1);for(o=0;o<e;o++)i[o]=arguments[o];return i[e]=r,t.apply(this,i)}},O=function(t){if(!v.isObject(t))return{};if(y)return y(t);_.prototype=t;var e=new _;return _.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},E=function(t,e){return null!=t&&h.call(t,e)},I=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},A=Math.pow(2,53)-1,T=S("length"),k=function(t){var e=T(t);return"number"==typeof e&&e>=0&&e<=A};v.each=v.forEach=function(t,e,n){var r,o;if(e=g(e,n),k(t))for(r=0,o=t.length;r<o;r++)e(t[r],r,t);else{var i=v.keys(t);for(r=0,o=i.length;r<o;r++)e(t[i[r]],i[r],t)}return t},v.map=v.collect=function(t,e,n){e=b(e,n);for(var r=!k(t)&&v.keys(t),o=(r||t).length,i=Array(o),s=0;s<o;s++){var a=r?r[s]:s;i[s]=e(t[a],a,t)}return i};var x=function(t){var e=function(e,n,r,o){var i=!k(e)&&v.keys(e),s=(i||e).length,a=t>0?0:s-1;for(o||(r=e[i?i[a]:a],a+=t);a>=0&&a<s;a+=t){var u=i?i[a]:a;r=n(r,e[u],u,e)}return r};return function(t,n,r,o){var i=arguments.length>=3;return e(t,g(n,o,4),r,i)}};v.reduce=v.foldl=v.inject=x(1),v.reduceRight=v.foldr=x(-1),v.find=v.detect=function(t,e,n){var r=(k(t)?v.findIndex:v.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},v.filter=v.select=function(t,e,n){var r=[];return e=b(e,n),v.each(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r},v.reject=function(t,e,n){return v.filter(t,v.negate(b(e)),n)},v.every=v.all=function(t,e,n){e=b(e,n);for(var r=!k(t)&&v.keys(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(!e(t[s],s,t))return!1}return!0},v.some=v.any=function(t,e,n){e=b(e,n);for(var r=!k(t)&&v.keys(t),o=(r||t).length,i=0;i<o;i++){var s=r?r[i]:i;if(e(t[s],s,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,r){return k(t)||(t=v.values(t)),("number"!=typeof n||r)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=w((function(t,e,n){var r,o;return v.isFunction(e)?o=e:v.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),v.map(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=I(t,r)),null==t)return;i=t[e]}return null==i?i:i.apply(t,n)}))})),v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var r,o,i=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=k(t)?t:v.values(t)).length;a<u;a++)null!=(r=t[a])&&r>i&&(i=r);else e=b(e,n),v.each(t,(function(t,n,r){((o=e(t,n,r))>s||o===-1/0&&i===-1/0)&&(i=t,s=o)}));return i},v.min=function(t,e,n){var r,o,i=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=k(t)?t:v.values(t)).length;a<u;a++)null!=(r=t[a])&&r<i&&(i=r);else e=b(e,n),v.each(t,(function(t,n,r){((o=e(t,n,r))<s||o===1/0&&i===1/0)&&(i=t,s=o)}));return i},v.shuffle=function(t){return v.sample(t,1/0)},v.sample=function(t,e,n){if(null==e||n)return k(t)||(t=v.values(t)),t[v.random(t.length-1)];var r=k(t)?v.clone(t):v.values(t),o=T(r);e=Math.max(Math.min(e,o),0);for(var i=o-1,s=0;s<e;s++){var a=v.random(s,i),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,e)},v.sortBy=function(t,e,n){var r=0;return e=b(e,n),v.pluck(v.map(t,(function(t,n,o){return{value:t,index:r++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")};var M=function(t,e){return function(n,r,o){var i=e?[[],[]]:{};return r=b(r,o),v.each(n,(function(e,o){var s=r(e,o,n);t(i,e,s)})),i}};v.groupBy=M((function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]})),v.indexBy=M((function(t,e,n){t[n]=e})),v.countBy=M((function(t,e,n){E(t,n)?t[n]++:t[n]=1}));var C=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(t){return t?v.isArray(t)?f.call(t):v.isString(t)?t.match(C):k(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:k(t)?t.length:v.keys(t).length},v.partition=M((function(t,e,n){t[n?0:1].push(e)}),!0),v.first=v.head=v.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return f.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return f.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,Boolean)};var D=function(t,e,n,r){for(var o=(r=r||[]).length,i=0,s=T(t);i<s;i++){var a=t[i];if(k(a)&&(v.isArray(a)||v.isArguments(a)))if(e)for(var u=0,c=a.length;u<c;)r[o++]=a[u++];else D(a,e,n,r),o=r.length;else n||(r[o++]=a)}return r};v.flatten=function(t,e){return D(t,e,!1)},v.without=w((function(t,e){return v.difference(t,e)})),v.uniq=v.unique=function(t,e,n,r){v.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=b(n,r));for(var o=[],i=[],s=0,a=T(t);s<a;s++){var u=t[s],c=n?n(u,s,t):u;e&&!n?(s&&i===c||o.push(u),i=c):n?v.contains(i,c)||(i.push(c),o.push(u)):v.contains(o,u)||o.push(u)}return o},v.union=w((function(t){return v.uniq(D(t,!0,!0))})),v.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=T(t);r<o;r++){var i=t[r];if(!v.contains(e,i)){var s;for(s=1;s<n&&v.contains(arguments[s],i);s++);s===n&&e.push(i)}}return e},v.difference=w((function(t,e){return e=D(e,!0,!0),v.filter(t,(function(t){return!v.contains(e,t)}))})),v.unzip=function(t){for(var e=t&&v.max(t,T).length||0,n=Array(e),r=0;r<e;r++)n[r]=v.pluck(t,r);return n},v.zip=w(v.unzip),v.object=function(t,e){for(var n={},r=0,o=T(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var j=function(t){return function(e,n,r){n=b(n,r);for(var o=T(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(n(e[i],i,e))return i;return-1}};v.findIndex=j(1),v.findLastIndex=j(-1),v.sortedIndex=function(t,e,n,r){for(var o=(n=b(n,r,1))(e),i=0,s=T(t);i<s;){var a=Math.floor((i+s)/2);n(t[a])<o?i=a+1:s=a}return i};var R=function(t,e,n){return function(r,o,i){var s=0,a=T(r);if("number"==typeof i)t>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(n&&i&&a)return r[i=n(r,o)]===o?i:-1;if(o!=o)return(i=e(f.call(r,s,a),v.isNaN))>=0?i+s:-1;for(i=t>0?s:a-1;i>=0&&i<a;i+=t)if(r[i]===o)return i;return-1}};v.indexOf=R(1,v.findIndex,v.sortedIndex),v.lastIndexOf=R(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},v.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(f.call(t,r,r+=e));return n};var N=function(t,e,n,r,o){if(!(r instanceof e))return t.apply(n,o);var i=O(t.prototype),s=t.apply(i,o);return v.isObject(s)?s:i};v.bind=w((function(t,e,n){if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var r=w((function(o){return N(t,r,e,this,n.concat(o))}));return r})),v.partial=w((function(t,e){var n=v.partial.placeholder,r=function(){for(var o=0,i=e.length,s=Array(i),a=0;a<i;a++)s[a]=e[a]===n?arguments[o++]:e[a];for(;o<arguments.length;)s.push(arguments[o++]);return N(t,r,this,this,s)};return r})),v.partial.placeholder=v,v.bindAll=w((function(t,e){var n=(e=D(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=v.bind(t[r],t)}})),v.memoize=function(t,e){var n=function(r){var o=n.cache,i=""+(e?e.apply(this,arguments):r);return E(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return n.cache={},n},v.delay=w((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var r,o,i,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:v.now(),r=null,s=t.apply(o,i),r||(o=i=null)},c=function(){var c=v.now();a||!1!==n.leading||(a=c);var f=e-(c-a);return o=this,i=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),a=c,s=t.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(u,f)),s};return c.cancel=function(){clearTimeout(r),a=0,r=o=i=null},c},v.debounce=function(t,e,n){var r,o,i=function(e,n){r=null,n&&(o=t.apply(e,n))},s=w((function(s){if(r&&clearTimeout(r),n){var a=!r;r=setTimeout(i,e),a&&(o=t.apply(this,s))}else r=v.delay(i,e,this,s);return o}));return s.cancel=function(){clearTimeout(r),r=null},s},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},v.once=v.partial(v.before,2),v.restArguments=w;var L=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=function(t,e){var n=P.length,r=t.constructor,o=v.isFunction(r)&&r.prototype||a,i="constructor";for(E(t,i)&&!v.contains(e,i)&&e.push(i);n--;)(i=P[n])in t&&t[i]!==o[i]&&!v.contains(e,i)&&e.push(i)};v.keys=function(t){if(!v.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return L&&z(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return L&&z(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},v.mapObject=function(t,e,n){e=b(e,n);for(var r=v.keys(t),o=r.length,i={},s=0;s<o;s++){var a=r[s];i[a]=e(t[a],a,t)}return i},v.pairs=function(t){for(var e=v.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},v.invert=function(t){for(var e={},n=v.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()};var U=function(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var o=1;o<r;o++)for(var i=arguments[o],s=t(i),a=s.length,u=0;u<a;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=i[c])}return n}};v.extend=U(v.allKeys),v.extendOwn=v.assign=U(v.keys),v.findKey=function(t,e,n){e=b(e,n);for(var r,o=v.keys(t),i=0,s=o.length;i<s;i++)if(e(t[r=o[i]],r,t))return r};var B,F,q=function(t,e,n){return e in n};v.pick=w((function(t,e){var n={},r=e[0];if(null==t)return n;v.isFunction(r)?(e.length>1&&(r=g(r,e[1])),e=v.allKeys(t)):(r=q,e=D(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var s=e[o],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),v.omit=w((function(t,e){var n,r=e[0];return v.isFunction(r)?(r=v.negate(r),e.length>1&&(n=e[1])):(e=v.map(D(e,!1,!1),String),r=function(t,n){return!v.contains(e,n)}),v.pick(t,r,n)})),v.defaults=U(v.allKeys,!0),v.create=function(t,e){var n=O(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var s=n[i];if(e[s]!==o[s]||!(s in o))return!1}return!0},B=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&F(t,e,n,r)},F=function(t,e,n,r){t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var o=l.call(t);if(o!==l.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e)}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(v.isFunction(s)&&s instanceof s&&v.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),i){if((c=t.length)!==e.length)return!1;for(;c--;)if(!B(t[c],e[c],n,r))return!1}else{var f,h=v.keys(t);if(c=h.length,v.keys(e).length!==c)return!1;for(;c--;)if(f=h[c],!E(e,f)||!B(t[f],e[f],n,r))return!1}return n.pop(),r.pop(),!0},v.isEqual=function(t,e){return B(t,e)},v.isEmpty=function(t){return null==t||(k(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=p||function(t){return"[object Array]"===l.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){v["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}})),v.isArguments(arguments)||(v.isArguments=function(t){return E(t,"callee")});var W=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof W&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return!v.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&isNaN(t)},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){if(!v.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var o=e[r];if(null==t||!h.call(t,o))return!1;t=t[o]}return!!n},v.noConflict=function(){return o._=i,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return v.isArray(t)?function(e){return I(e,t)}:S(t)},v.propertyOf=function(t){return null==t?function(){}:function(e){return v.isArray(e)?I(t,e):t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=v.invert(H),G=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,e):t}};v.escape=G(H),v.unescape=G(K),v.result=function(t,e,n){v.isArray(e)||(e=[e]);var r=e.length;if(!r)return v.isFunction(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=v.isFunction(i)?i.call(t):i}return t};var V=0;v.uniqueId=function(t){var e=++V+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Q=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+J[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var r,o=RegExp([(e.escape||Q).source,(e.interpolate||Q).source,(e.evaluate||Q).source].join("|")+"|$","g"),i=0,s="__p+='";t.replace(o,(function(e,n,r,o,a){return s+=t.slice(i,a).replace(Y,$),i=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e})),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(e.variable||"obj","_",s)}catch(t){throw t.source=s,t}var a=function(t){return r.call(this,t,v)},u=e.variable||"obj";return a.source="function("+u+"){\n"+s+"}",a},v.chain=function(t){var e=v(t);return e._chain=!0,e};var X=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){return v.each(v.functions(t),(function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),X(this,n.apply(v,t))}})),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=s[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],X(this,n)}})),v.each(["concat","join","slice"],(function(t){var e=s[t];v.prototype[t]=function(){return X(this,e.apply(this._wrapped,arguments))}})),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(r=function(){return v}.apply(e,[]))||(t.exports=r)}()},429:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return u.default}});var r=h(n(990)),o=h(n(237)),i=h(n(355)),s=h(n(764)),a=h(n(314)),u=h(n(464)),c=h(n(435)),f=h(n(8)),l=h(n(222));function h(t){return t&&t.__esModule?t:{default:t}}},163:(t,e)=>{"use strict";function n(t){return 14+(t+64>>>9<<4)+1}function r(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function o(t,e,n,o,i,s){return r((a=r(r(e,t),r(o,s)))<<(u=i)|a>>>32-u,n);var a,u}function i(t,e,n,r,i,s,a){return o(e&n|~e&r,t,e,i,s,a)}function s(t,e,n,r,i,s,a){return o(e&r|n&~r,t,e,i,s,a)}function a(t,e,n,r,i,s,a){return o(e^n^r,t,e,i,s,a)}function u(t,e,n,r,i,s,a){return o(n^(e|~r),t,e,i,s,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){const e=[],n=32*t.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=t[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[n(e)-1]=e;let o=1732584193,c=-271733879,f=-1732584194,l=271733878;for(let e=0;e<t.length;e+=16){const n=o,h=c,p=f,d=l;o=i(o,c,f,l,t[e],7,-680876936),l=i(l,o,c,f,t[e+1],12,-389564586),f=i(f,l,o,c,t[e+2],17,606105819),c=i(c,f,l,o,t[e+3],22,-1044525330),o=i(o,c,f,l,t[e+4],7,-176418897),l=i(l,o,c,f,t[e+5],12,1200080426),f=i(f,l,o,c,t[e+6],17,-1473231341),c=i(c,f,l,o,t[e+7],22,-45705983),o=i(o,c,f,l,t[e+8],7,1770035416),l=i(l,o,c,f,t[e+9],12,-1958414417),f=i(f,l,o,c,t[e+10],17,-42063),c=i(c,f,l,o,t[e+11],22,-1990404162),o=i(o,c,f,l,t[e+12],7,1804603682),l=i(l,o,c,f,t[e+13],12,-40341101),f=i(f,l,o,c,t[e+14],17,-1502002290),c=i(c,f,l,o,t[e+15],22,1236535329),o=s(o,c,f,l,t[e+1],5,-165796510),l=s(l,o,c,f,t[e+6],9,-1069501632),f=s(f,l,o,c,t[e+11],14,643717713),c=s(c,f,l,o,t[e],20,-373897302),o=s(o,c,f,l,t[e+5],5,-701558691),l=s(l,o,c,f,t[e+10],9,38016083),f=s(f,l,o,c,t[e+15],14,-660478335),c=s(c,f,l,o,t[e+4],20,-405537848),o=s(o,c,f,l,t[e+9],5,568446438),l=s(l,o,c,f,t[e+14],9,-1019803690),f=s(f,l,o,c,t[e+3],14,-187363961),c=s(c,f,l,o,t[e+8],20,1163531501),o=s(o,c,f,l,t[e+13],5,-1444681467),l=s(l,o,c,f,t[e+2],9,-51403784),f=s(f,l,o,c,t[e+7],14,1735328473),c=s(c,f,l,o,t[e+12],20,-1926607734),o=a(o,c,f,l,t[e+5],4,-378558),l=a(l,o,c,f,t[e+8],11,-2022574463),f=a(f,l,o,c,t[e+11],16,1839030562),c=a(c,f,l,o,t[e+14],23,-35309556),o=a(o,c,f,l,t[e+1],4,-1530992060),l=a(l,o,c,f,t[e+4],11,1272893353),f=a(f,l,o,c,t[e+7],16,-155497632),c=a(c,f,l,o,t[e+10],23,-1094730640),o=a(o,c,f,l,t[e+13],4,681279174),l=a(l,o,c,f,t[e],11,-358537222),f=a(f,l,o,c,t[e+3],16,-722521979),c=a(c,f,l,o,t[e+6],23,76029189),o=a(o,c,f,l,t[e+9],4,-640364487),l=a(l,o,c,f,t[e+12],11,-421815835),f=a(f,l,o,c,t[e+15],16,530742520),c=a(c,f,l,o,t[e+2],23,-995338651),o=u(o,c,f,l,t[e],6,-198630844),l=u(l,o,c,f,t[e+7],10,1126891415),f=u(f,l,o,c,t[e+14],15,-1416354905),c=u(c,f,l,o,t[e+5],21,-57434055),o=u(o,c,f,l,t[e+12],6,1700485571),l=u(l,o,c,f,t[e+3],10,-1894986606),f=u(f,l,o,c,t[e+10],15,-1051523),c=u(c,f,l,o,t[e+1],21,-2054922799),o=u(o,c,f,l,t[e+8],6,1873313359),l=u(l,o,c,f,t[e+15],10,-30611744),f=u(f,l,o,c,t[e+6],15,-1560198380),c=u(c,f,l,o,t[e+13],21,1309151649),o=u(o,c,f,l,t[e+4],6,-145523070),l=u(l,o,c,f,t[e+11],10,-1120210379),f=u(f,l,o,c,t[e+2],15,718787259),c=u(c,f,l,o,t[e+9],21,-343485551),o=r(o,n),c=r(c,h),f=r(f,p),l=r(l,d)}return[o,c,f,l]}(function(t){if(0===t.length)return[];const e=8*t.length,r=new Uint32Array(n(e));for(let n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))}},790:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};e.default=n},314:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default="00000000-0000-0000-0000-000000000000"},222:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(435))&&r.__esModule?r:{default:r};e.default=function(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}},58:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},319:(t,e)=>{"use strict";let n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},757:(t,e)=>{"use strict";function n(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function r(t,e){return t<<e|t>>>32-e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){const e=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){const e=unescape(encodeURIComponent(t));t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const i=t.length/4+2,s=Math.ceil(i/16),a=new Array(s);for(let e=0;e<s;++e){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=t[64*e+4*r]<<24|t[64*e+4*r+1]<<16|t[64*e+4*r+2]<<8|t[64*e+4*r+3];a[e]=n}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(let t=0;t<s;++t){const i=new Uint32Array(80);for(let e=0;e<16;++e)i[e]=a[t][e];for(let t=16;t<80;++t)i[t]=r(i[t-3]^i[t-8]^i[t-14]^i[t-16],1);let s=o[0],u=o[1],c=o[2],f=o[3],l=o[4];for(let t=0;t<80;++t){const o=Math.floor(t/20),a=r(s,5)+n(o,u,c,f)+l+e[o]+i[t]>>>0;l=f,f=c,c=r(u,30)>>>0,u=s,s=a}o[0]=o[0]+s>>>0,o[1]=o[1]+u>>>0,o[2]=o[2]+c>>>0,o[3]=o[3]+f>>>0,o[4]=o[4]+l>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},8:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.unsafeStringify=s;var r,o=(r=n(435))&&r.__esModule?r:{default:r};const i=[];for(let t=0;t<256;++t)i.push((t+256).toString(16).slice(1));function s(t,e=0){return i[t[e+0]]+i[t[e+1]]+i[t[e+2]]+i[t[e+3]]+"-"+i[t[e+4]]+i[t[e+5]]+"-"+i[t[e+6]]+i[t[e+7]]+"-"+i[t[e+8]]+i[t[e+9]]+"-"+i[t[e+10]]+i[t[e+11]]+i[t[e+12]]+i[t[e+13]]+i[t[e+14]]+i[t[e+15]]}e.default=function(t,e=0){const n=s(t,e);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},990:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(319))&&r.__esModule?r:{default:r},i=n(8);let s,a,u=0,c=0;e.default=function(t,e,n){let r=e&&n||0;const f=e||new Array(16);let l=(t=t||{}).node||s,h=void 0!==t.clockseq?t.clockseq:a;if(null==l||null==h){const e=t.random||(t.rng||o.default)();null==l&&(l=s=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==h&&(h=a=16383&(e[6]<<8|e[7]))}let p=void 0!==t.msecs?t.msecs:Date.now(),d=void 0!==t.nsecs?t.nsecs:c+1;const y=p-u+(d-c)/1e4;if(y<0&&void 0===t.clockseq&&(h=h+1&16383),(y<0||p>u)&&void 0===t.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,c=d,a=h,p+=122192928e5;const _=(1e4*(268435455&p)+d)%4294967296;f[r++]=_>>>24&255,f[r++]=_>>>16&255,f[r++]=_>>>8&255,f[r++]=255&_;const v=p/4294967296*1e4&268435455;f[r++]=v>>>8&255,f[r++]=255&v,f[r++]=v>>>24&15|16,f[r++]=v>>>16&255,f[r++]=h>>>8|128,f[r++]=255&h;for(let t=0;t<6;++t)f[r+t]=l[t];return e||(0,i.unsafeStringify)(f)}},237:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(925)),o=i(n(163));function i(t){return t&&t.__esModule?t:{default:t}}var s=(0,r.default)("v3",48,o.default);e.default=s},925:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0,e.default=function(t,e,n){function r(t,r,s,a){var u;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=(0,i.default)(r)),16!==(null===(u=r)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+t.length);if(c.set(r),c.set(t,r.length),c=n(c),c[6]=15&c[6]|e,c[8]=63&c[8]|128,s){a=a||0;for(let t=0;t<16;++t)s[a+t]=c[t];return s}return(0,o.unsafeStringify)(c)}try{r.name=t}catch(t){}return r.DNS=s,r.URL=a,r};var r,o=n(8),i=(r=n(222))&&r.__esModule?r:{default:r};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";e.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";e.URL=a},355:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n(790)),o=s(n(319)),i=n(8);function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){if(r.default.randomUUID&&!e&&!t)return r.default.randomUUID();const s=(t=t||{}).random||(t.rng||o.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=s[t];return e}return(0,i.unsafeStringify)(s)}},764:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(925)),o=i(n(757));function i(t){return t&&t.__esModule?t:{default:t}}var s=(0,r.default)("v5",80,o.default);e.default=s},435:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(58))&&r.__esModule?r:{default:r};e.default=function(t){return"string"==typeof t&&o.default.test(t)}},464:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(435))&&r.__esModule?r:{default:r};e.default=function(t){if(!(0,o.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t="URLSearchParams"in self,e="Symbol"in self&&"iterator"in Symbol,n="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in self,o="ArrayBuffer"in self;if(o)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(n[Symbol.iterator]=function(){return n}),n}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function p(t){var e=new FileReader,n=h(e);return e.readAsArrayBuffer(t),n}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var i;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&n&&(i=e)&&DataView.prototype.isPrototypeOf(i)?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,e,n,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=h(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=a(t),e=u(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[a(t)]},f.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},f.prototype.set=function(t,e){this.map[a(t)]=u(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),c(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),c(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),c(t)},e&&(f.prototype[Symbol.iterator]=f.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var n,r,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),_.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function m(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function g(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];g.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})};var w=self.DOMException;try{new w}catch(t){(w=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function O(t,e){return new Promise((function(r,o){var i=new v(t,e);if(i.signal&&i.signal.aborted)return o(new w("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new g(o,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new w("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&n&&(s.responseType="blob"),i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),i.signal&&(i.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",a)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}O.polyfill=!0,self.fetch||(self.fetch=O,self.Headers=f,self.Request=v,self.Response=g)})(),(()=>{"use strict";var t=r(96),n=r.n(t),o=r(615);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getStatus",value:function(t){var e=t.log,n=t.dnd,r=t.activity;return"out"===e?"OFFLINE":"on"===n?"DND":"idle"===r?"AVAILABLE":"in_use"===r?"BUSY":"post_processing"===r?"AWAY":"UNAVAILABLE"}},{key:"logFunction",value:function(t){console.log(t)}},{key:"setLogFunction",value:function(t){this.logFunction=t}},{key:"consoleLog",value:function(t){this.logFunction(t)}},{key:"consoleError",value:function(t){this.logFunction(t)}}],null&&i(e.prototype,null),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var a=r(856),u=r.n(a);function c(t){return u().sanitize(t,{USE_PROFILES:{html:!0},ADD_ATTR:["target"],FORBID_TAGS:["style"]})}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function p(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return p(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).chaletAdapter=t,n.roomUpdatesHandler=e,n}return e=a,(n=[{key:"onSync",value:function(t){s.consoleLog("Hello message received, Chalet server version ".concat(t.server_version)),this.roomUpdatesHandler.subscribe()}},{key:"onWrongToken",value:function(){s.consoleLog("wrong token")}},{key:"onOnline",value:function(){s.consoleLog("chalet token was set successfully"),this.chaletAdapter.joinRoom()}},{key:"onOffline",value:function(){s.consoleLog("offline")}},{key:"onTyping",value:function(t){this.chaletAdapter.receiveChaletChatTyping(t)}},{key:"onError",value:function(t){var e=t.type,n=t.error;["info_ping","info_set_session_token","going_offline"].includes(e)?s.consoleLog("Websocket ignorable error "+e+" "+n):s.consoleError("Websocket error "+e+" "+n)}},{key:"checkForBot",value:function(t){this.roomUpdatesHandler.isBotInConversation||t.author_user.id.includes("vcc-chat-processor-bot")&&this.roomUpdatesHandler.setIsBotInConversation()}},{key:"onRoomText",value:function(t){var e="";if(this.checkForBot(t),"text_parsed"===t.type&&(e=c(t.raw||t.parsed)),t.author_user&&t.author_user.is_bot&&"vcc-co-browsing"===t.author_user.name)this.chaletAdapter.receiveCoBrowsingMessage(t.raw||t.parsed);else{var n=t.id||null;this.chaletAdapter.receiveMessage({id:n,message:e,shared_files:t.shared_files,author_user:t.author_user,meta:t.meta})}}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.xr.DefaultProxy);function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=b(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function O(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(o){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return O(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e)).chaletAdapter=t,r.onNotification=r.onNotification.bind(S(r)),r.updatesResource="".concat(n,":/vcc-chat-processor/api/room-updates"),r.prevNotification=null,r.isBotInConversation=!1,r.acceptedAgentsCount=0,r.isBeingHandledByAgent=null,r.isInTransferProcess=null,r}return e=a,(n=[{key:"setIsBotInConversation",value:function(){this.isBotInConversation=!0}},{key:"getAcceptedAgentsCount",value:function(){return this.acceptedAgentsCount}},{key:"setAcceptedAgentsCount",value:function(t){var e=null;return"number"==typeof t&&(e=t),"function"==typeof t&&(e=t(this.acceptedAgentsCount)),null!==e?(this.acceptedAgentsCount=e,e):e}},{key:"computeIsBeingHandledByAgent",value:function(){this.isBeingHandledByAgent||(this.isBeingHandledByAgent=!0,this.chaletAdapter.setRoomMeta({isBeingHandledByAgent:!0}))}},{key:"setIsInTransferProcess",value:function(t){this.isInTransferProcess=t,this.chaletAdapter.setRoomMeta({isInTransferProcess:t})}},{key:"getValuesFromRoomMeta",value:function(){var t=this;this.chaletAdapter.getRoomMetaValues(["isBeingHandledByAgent","isInTransferProcess"]).then((function(e){var n=e.isBeingHandledByAgent,r=e.isInTransferProcess;void 0!==n&&(t.isBeingHandledByAgent=n),void 0!==r&&(t.isInTransferProcess=r),t.isBeingHandledByAgent&&!t.isInTransferProcess&&(t.acceptedAgentsCount=1)}))}},{key:"subscribe",value:function(){var t=this;return this.prevNotification=null,this.isBotInConversation=!1,this.acceptedAgentsCount=0,this.isBeingHandledByAgent=null,this.isInTransferProcess=null,g(E(a.prototype),"subscribe",this).call(this,"".concat(this.updatesResource,"/").concat(this.chaletAdapter.roomId),this.onNotification).then((function(){return t.getValuesFromRoomMeta(),t.chaletAdapter.createConversation()}))}},{key:"onNotification",value:function(t){var e=this;if(t&&t.items){var n=!0;t.items.forEach((function(t){if(e.prevNotification){if(n=t.status===a.DELETED&&e.prevNotification.status!==a.QUEUED&&e.prevNotification.status!==a.SCRIPTING,t.status===a.QUEUED&&e.prevNotification.status!==a.DELETED&&e.prevNotification.status!==a.SCRIPTING&&!e.isBotInConversation)return e.chaletAdapter.onInteractionDeleted(),e.chaletAdapter.onInteractionQueued(),void(e.prevNotification=t);if(t.status===a.DELETED&&e.setAcceptedAgentsCount((function(t){return t-1}))>=1)return}switch(t.status){case a.ACCEPTED:e.isBotInConversation=!1,e.setAcceptedAgentsCount((function(t){return t+1})),e.chaletAdapter.onInteractionAccepted(t.agentInfo),e.computeIsBeingHandledByAgent(),e.setIsInTransferProcess(!1);break;case a.DELETED:n&&e.chaletAdapter.onInteractionDeleted(!0),e.setIsInTransferProcess(!0);break;case a.QUEUED:var r,o,i,u=(null===(r=e.prevNotification)||void 0===r?void 0:r.status)===a.SCRIPTING||(null===(o=e.prevNotification)||void 0===o?void 0:o.status)===a.QUEUED,c=(null===(i=e.prevNotification)||void 0===i?void 0:i.status)===a.DELETED;e.chaletAdapter.onInteractionQueued(u,c);break;case a.SCRIPTING:e.chaletAdapter.onInteractionScripting();break;default:s.consoleLog("Unhandled status: ".concat(t.status))}e.prevNotification=t}))}else s.consoleLog("No items received!")}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.proto=e}var e,n;return e=t,(n=[{key:"unsubscribe",value:function(t,e){this.proto.externalCallUnsubscribe(t,e)}},{key:"subscribe",value:function(t,e){return this.proto.externalCall({notify:e,resource:t})}},{key:"updateSubscriptions",value:function(t,e){return this.unsubscribe(t,e),this.subscribe(t,e)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());I(A,"ACCEPTED","ACCEPTED"),I(A,"DELETED","DELETED"),I(A,"QUEUED","QUEUED"),I(A,"SCRIPTING","SCRIPTING");const T=A;function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const x=function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=(r[0],r[1]);return null!=o&&""!==o&&void 0!==o})))};function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function N(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var L=new WeakSet,P=new WeakSet,z=new WeakSet,U=new WeakSet,B=new WeakSet,F=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,B),R(this,U),R(this,z),R(this,P),R(this,L),this.roomId=n,this.data={};var r={setItem:function(t,e){this.data[t]=e}.bind(this),getItem:function(t){return this.data[t]}.bind(this),removeItem:function(t){delete this.data[t]}.bind(this)};this.storage=e||r,this._latestAgentId=null}var e,n;return e=t,(n=[{key:"getAgent",value:function(t){var e=N(this,z,H).call(this,t);if(!e)return null;var n=N(this,U,K).call(this);return e in n?n[e]:null}},{key:"setAgent",value:function(t){if(t){var e=N(this,L,q).call(this),n=t.agentId,r=N(this,P,W).call(this,n),o=C(C({},N(this,U,K).call(this)),{},D({},r,N(this,B,G).call(this,t)));this._latestAgentId=r,this.storage.setItem(e,JSON.stringify(o))}}},{key:"clearAgentsData",value:function(){var t=N(this,L,q).call(this);this.storage.removeItem(t)}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(){return"agent_".concat(this.roomId)}function W(t){return t.startsWith("ag")?t.substring(2):t}function H(t){if(!t&&!this._latestAgentId)return null;if(t){if(t.includes("vcc-chat-processor-bot"))return null;var e=N(this,P,W).call(this,t);return this._latestAgentId!==e&&(this._latestAgentId=e),e}return this._latestAgentId}function K(){var t=N(this,L,q).call(this),e=this.storage.getItem(t);return e?JSON.parse(e):{}}function G(t){return t?{displayName:t.displayName||t.nickname}:{}}const V=F;function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y,$,X=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.proto=n,this.chaletAdapter=e,this._unresolvedPromise=null,this.roomMeta=null}var n,r;return n=t,(r=[{key:"constructPrivateKey",value:function(e){return[t.PREFIX,e].join("")}},{key:"getProtoRequestAsPromise",value:function(){var t=this;return this._unresolvedPromise||(this._unresolvedPromise=new Promise((function(e){t.proto.getRoomMeta(t.chaletAdapter.roomId).then((function(t){e(t)})).finally((function(){t._unresolvedPromise=null}))}))),this._unresolvedPromise}},{key:"getRoomMeta",value:function(){var t=this;return new Promise((function(e){t.roomMeta?e(t.roomMeta):t.getProtoRequestAsPromise(e).then((function(n){t.roomMeta=n.meta,e(n.meta)}))}))}},{key:"getRoomMetaValues",value:function(t){var n=this;return new Promise((function(r){n.getRoomMeta().then((function(e){var o=t.reduce((function(t,r){var o=n.constructPrivateKey(r);return Object.hasOwn(e,o)&&(t[r]=e[o]),t}),{});r(o)})).catch((function(){s.consoleLog("Error getting values from room meta",e),r({})}))}))}},{key:"setRoomMeta",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(n,r)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],s=o[1];e.proto.setRoomMeta(e.chaletAdapter.roomId,e.constructPrivateKey(i),s)}))}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();($="PREFIX")in(Y=X)?Object.defineProperty(Y,$,{value:"@@",enumerable:!0,configurable:!0,writable:!0}):Y[$]="@@";const Z=X;function tt(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,"setTyping",n()((function(){e.proto.setTyping(e.roomId)}),1e3,{trailing:!1})),this._ready=null,this._fail=null,this.ready=new Promise((function(t,n){e._ready=t,e._fail=n})),this.roomId="",this.token="",this.channelUuid=null,this.roomUpdatesHandler=null,this.storageManager=null,this.roomMetaManager=null,this.cloud8BaseUrl=null,this.conversationId=null,this.interactionCreated=!1,this.keepSessionAliveFeatureEnabled=!1,this.conversationEndedByAgent=!1,this.setCleanupAfterHardDelete=function(){},this._onReceiveIncomingMessage=function(){},this._onReceiveCoBrowsingMessage=function(){},this._onChaletChatTypingCallback=function(){}}var e,r;return e=t,r=[{key:"setInteractionDetails",value:function(t){this.interactionDetails=t}},{key:"setInteractionCreated",value:function(t){this.interactionCreated=t}},{key:"getToken",value:function(){return this.token}},{key:"setChaletToken",value:function(t,e){return this.roomId=e,this.token=t,this.proto.setSessionToken(t),this.initializeStorageManager(e),this.ready}},{key:"setCloud8Resource",value:function(t){this.cloud8Resource=t}},{key:"setCloud8BaseUrl",value:function(t){this.cloud8BaseUrl=t}},{key:"setDiscoveryUrl",value:function(t){return this.proto=new o.mv({DISCOVER_URL:t,PULSE_MILLISECONDS:1e3,WEBSOCKET_CLASS:WebSocket,useDiscover:!0}),this.roomUpdatesHandler=new T(this,this.proto,this.cloud8Resource),this.roomMetaManager=new Z(this,this.proto),this.proto.setProxy(new y(this,this.roomUpdatesHandler)),this}},{key:"getAgent",value:function(t){return this.storageManager.getAgent(t)}},{key:"setAgent",value:function(t){this.storageManager.setAgent(t)}},{key:"setKeepSessionAlive",value:function(t){return this.keepSessionAliveFeatureEnabled=t,this}},{key:"setChannelUuid",value:function(t){return this.channelUuid=t,this}},{key:"setConversationId",value:function(t){return this.conversationId=t,this}},{key:"setOnChaletChatTypingCallback",value:function(t){return this._onChaletChatTypingCallback=t,this}},{key:"setOnInteractionScripting",value:function(t){return this.onChaletInteractionScriptingCallback=t,this}},{key:"setOnInteractionQueued",value:function(t){return this.onChaletInteractionQueuedCallback=t,this}},{key:"setOnInteractionAccepted",value:function(t){return this.onChaletInteractionAcceptedCallback=t,this}},{key:"setOnInteractionDeleted",value:function(t){return this.onChaletInteractionDeletedCallback=t,this}},{key:"setOnReceiveIncomingMessage",value:function(t){return this._onReceiveIncomingMessage=t,this}},{key:"setOnReceiveCoBrowsingMessage",value:function(t){return this._onReceiveCoBrowsingMessage=t,this}},{key:"setHelperLogFunction",value:function(t){return s.setLogFunction(t),this}},{key:"setCleanupSessionDataAfterHardDelete",value:function(t){return this.setCleanupAfterHardDelete=t,this}},{key:"reset",value:function(){this.conversationId=null,this.interactionCreated=!1,this.conversationEndedByAgent=!1,this.storageManager.clearAgentsData()}},{key:"initializeStorageManager",value:function(t){try{this.storageManager=new V(window.localStorage,t)}catch(e){this.storageManager=new V(null,t)}}},{key:"joinRoom",value:function(){return this.proto.joinRoom({room_id:this.roomId}).then(this._ready,this._fail)}},{key:"createConversation",value:function(){var t=this;return new Promise((function(e,n){if(t.interactionCreated)return t.getRoomMetaValues(["conversationId"]).then((function(e){var n=e.conversationId;t.setConversationId(n)})),void e();var r=t.interactionDetails,o=r.tenantId,i=r.queueId,s=r.scriptId,a=r.preChatFormData,u=r.customChatInfo,c=i?t.getQueueIdFromQueueString(i,o):null,f={};s?(f.type="Script",f.id=s):c&&(f.type="Queue",f.id=c);var l=null==r?void 0:r.legacyData,h=l.customerEmail,p=l.customerLanguage,d=l.con,y=l.nam,_=l.org,v=l.ema,m=l.ipaddress,g=l.timezoneOffset,b=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u),w={email:null!=v?v:h,language:p,userId:d,name:y,company:_,additionalProperties:[].concat(tt((a||[]).map((function(t){return{key:t.question,value:t.answer,id:t.id}}))),tt(Object.entries(b).map((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,n)||et(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{key:r[0],value:r[1]}})))),ipaddress:m,timezoneOffset:g},O={channelId:t.channelUuid,user:x(w),assignment:f};jQuery.ajax({url:"".concat(t.cloud8BaseUrl,"/vcc-chat-processor/chat-gateway/v1/conversations"),headers:{"Content-Type":"application/json","X-8x8-Tenant":o,Authorization:"Bearer ".concat(t.token)},type:"POST",dataType:"json",data:JSON.stringify(O)}).done((function(n){var r=n.conversationId;t.setInteractionCreated(!0),t.setConversationId(r),t.setRoomMeta({conversationId:r}),e()})).fail((function(){console.error("Creation of conversation using Chat Gateway failed"),n()}))}))}},{key:"endChat",value:function(t){if(this.conversationEndedByAgent)return this.hardDelete(),!0;try{var e=t.tenant;return this.proto.externalCall({resource:"".concat(this.cloud8Resource,":/vcc-chat-processor/chat-gateway/v1/conversations/").concat(this.conversationId,"/participants/user"),method:"delete",headers:{"X-8x8-Tenant":e}}),jQuery.ajax("".concat(this.cloud8BaseUrl,"/vcc-chat-processor/chat-gateway/v1/conversations/").concat(this.conversationId,"/participants/user"),{async:!1,headers:{"Content-Type":"application/json","X-8x8-Tenant":e,Authorization:"Bearer ".concat(this.token)},type:"DELETE"}).always(this.hardDelete.bind(this)),this.setConversationId(null),this.setInteractionCreated(!1),this.storageManager.clearAgentsData(),!0}catch(t){return s.consoleLog("Error ending chat",t),!1}}},{key:"startWatch",value:function(){this.shutdownTimer=setTimeout(this.hardDelete.bind(this),3e4),this.clearSessionDataTimer=setTimeout(this.setCleanupAfterHardDelete,7e3)}},{key:"hardDelete",value:function(){var t=this;this.proto.setSessionToken(null),this.proto._wsConnection&&this.proto._wsConnection.shutdown(),this.reset(),this.ready=new Promise((function(e,n){t._ready=e,t._fail=n}))}},{key:"onInteractionScripting",value:function(){this.interactionCreated=!0,this.onChaletInteractionScriptingCallback&&this.onChaletInteractionScriptingCallback()}},{key:"onInteractionQueued",value:function(t,e){this.interactionCreated||(this.interactionCreated=!0),this.conversationEndedByAgent=!1,clearTimeout(this.shutdownTimer),clearTimeout(this.clearSessionDataTimer),this.onChaletInteractionQueuedCallback&&this.onChaletInteractionQueuedCallback(t,e)}},{key:"onInteractionAccepted",value:function(t){this.setAgent(t),this.onChaletInteractionAcceptedCallback&&this.onChaletInteractionAcceptedCallback(t)}},{key:"onInteractionDeleted",value:function(t){this.conversationEndedByAgent=!0,t&&this.startWatch(),this.onChaletInteractionDeletedCallback&&this.onChaletInteractionDeletedCallback()}},{key:"sendMessage",value:function(t){return this.proto.sendRoomText({raw:c(t),room_id:this.roomId},new o.Bl)}},{key:"sendCoBrowsingMessage",value:function(t){var e=JSON.stringify(t);return this.proto.sendRoomText({raw:e,room_id:this.roomId,bot_name:"vcc-co-browsing"})}},{key:"receiveMessage",value:function(t){this._onReceiveIncomingMessage(t)}},{key:"receiveCoBrowsingMessage",value:function(t){var e;try{e=JSON.parse(t),this._onReceiveCoBrowsingMessage(e)}catch(t){}}},{key:"receiveChaletChatTyping",value:function(t){this._onChaletChatTypingCallback(t)}},{key:"formatMessage",value:function(t){return c(t)}},{key:"getQueueIdFromQueueString",value:function(t,e){return t.replace("".concat(e,"~~queue~~chat~~"),"")}},{key:"canWriteBeforeAgentAccepts",value:function(){return this.keepSessionAliveFeatureEnabled}},{key:"getRoomMetaValues",value:function(t){return this.roomMetaManager.getRoomMetaValues(t)}},{key:"setRoomMeta",value:function(t){this.roomMetaManager.setRoomMeta(t)}}],r&&ot(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const at=st;window.chaletAdapter=new at})()})();